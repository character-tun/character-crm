{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":82,"numPassedTests":295,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":82,"numTotalTests":295,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1761555144591,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["OrderStatus POST/PUT: reference validation"],"duration":10252,"failureDetails":[],"failureMessages":[],"fullName":"OrderStatus POST/PUT: reference validation POST invalid notify reference → 400 INVALID_REFERENCE","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"POST invalid notify reference → 400 INVALID_REFERENCE"},{"ancestorTitles":["OrderStatus POST/PUT: reference validation"],"duration":10159,"failureDetails":[],"failureMessages":[],"fullName":"OrderStatus POST/PUT: reference validation POST valid notify reference (DEV store by id) → 201","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST valid notify reference (DEV store by id) → 201"},{"ancestorTitles":["OrderStatus POST/PUT: reference validation"],"duration":10125,"failureDetails":[],"failureMessages":[],"fullName":"OrderStatus POST/PUT: reference validation PUT invalid print reference → 400 INVALID_REFERENCE","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"PUT invalid print reference → 400 INVALID_REFERENCE"},{"ancestorTitles":["OrderStatus POST/PUT: reference validation"],"duration":10088,"failureDetails":[],"failureMessages":[],"fullName":"OrderStatus POST/PUT: reference validation PUT valid print reference (DEV store by code) → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"PUT valid print reference (DEV store by code) → 200"}],"endTime":1761555185465,"message":"","name":"/Users/admin/character crm/tests/statuses.references.test.js","startTime":1761555144620,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["scripts/migrateOrderStatuses.js"],"duration":588,"failureDetails":[],"failureMessages":[],"fullName":"scripts/migrateOrderStatuses.js Idempotency: fills gaps and second run updated=0","invocations":1,"location":null,"numPassingAsserts":16,"retryReasons":[],"status":"passed","title":"Idempotency: fills gaps and second run updated=0"},{"ancestorTitles":["scripts/migrateOrderStatuses.js"],"duration":427,"failureDetails":[],"failureMessages":[],"fullName":"scripts/migrateOrderStatuses.js Unknown statuses without mapping → reported, no closed/payments changes; with mapping → closed.success=true","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"Unknown statuses without mapping → reported, no closed/payments changes; with mapping → closed.success=true"},{"ancestorTitles":["scripts/migrateOrderStatuses.js"],"duration":268,"failureDetails":[],"failureMessages":[],"fullName":"scripts/migrateOrderStatuses.js Closed-fail sets paymentsLocked=true when closed empty","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Closed-fail sets paymentsLocked=true when closed empty"}],"endTime":1761555188505,"message":"","name":"/Users/admin/character crm/tests/migrateOrderStatuses.test.js","startTime":1761555185485,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Load: Queue + TTL Cache perf"],"duration":1917,"failureDetails":[],"failureMessages":[],"fullName":"Load: Queue + TTL Cache perf 10k смен статусов с авто-действиями, метрики и TTL-кэш","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"10k смен статусов с авто-действиями, метрики и TTL-кэш"}],"endTime":1761555190693,"message":"","name":"/Users/admin/character crm/tests/load/queues.cache.perf.test.js","startTime":1761555188507,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionQueue behavior (e2e, DEV mem-queue)"],"duration":377,"failureDetails":[],"failureMessages":[],"fullName":"statusActionQueue behavior (e2e, DEV mem-queue) idempotency: same status change twice -> one job by jobId","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"idempotency: same status change twice -> one job by jobId"},{"ancestorTitles":["statusActionQueue behavior (e2e, DEV mem-queue)"],"duration":1315,"failureDetails":[],"failureMessages":[],"fullName":"statusActionQueue behavior (e2e, DEV mem-queue) retry/backoff: force notify/print fail -> attempts counted and in failedLastN","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retry/backoff: force notify/print fail -> attempts counted and in failedLastN"},{"ancestorTitles":["statusActionQueue behavior (e2e, DEV mem-queue)"],"duration":153,"failureDetails":[],"failureMessages":[],"fullName":"statusActionQueue behavior (e2e, DEV mem-queue) mini load: 100 orders × 2 actions -> no sticking, all completed","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"mini load: 100 orders × 2 actions -> no sticking, all completed"}],"endTime":1761555209949,"message":"","name":"/Users/admin/character crm/tests/queue.statusActions.behavior.e2e.test.js","startTime":1761555207982,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Contracts: /api/payments","DEV branch"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments DEV branch POST /api/payments (create) returns valid response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /api/payments (create) returns valid response"},{"ancestorTitles":["API Contracts: /api/payments","DEV branch"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments DEV branch POST /api/payments/refund returns valid response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /api/payments/refund returns valid response"},{"ancestorTitles":["API Contracts: /api/payments","DEV branch"],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments DEV branch POST /api/payments validates required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/payments validates required fields"},{"ancestorTitles":["API Contracts: /api/payments","Mongo branch"],"duration":89,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments Mongo branch order not found returns 404","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"order not found returns 404"},{"ancestorTitles":["API Contracts: /api/payments","Mongo branch"],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments Mongo branch create payment succeeds when order open and unlocked","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"create payment succeeds when order open and unlocked"},{"ancestorTitles":["API Contracts: /api/payments","Mongo branch"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments Mongo branch create payment blocked when paymentsLocked","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"create payment blocked when paymentsLocked"},{"ancestorTitles":["API Contracts: /api/payments","Mongo branch"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments Mongo branch refund blocked when order closed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"refund blocked when order closed"},{"ancestorTitles":["API Contracts: /api/payments","Mongo branch"],"duration":54,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/payments Mongo branch RBAC requires Finance or Admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"RBAC requires Finance or Admin"}],"endTime":1761555210658,"message":"","name":"/Users/admin/character crm/tests/api.contracts.payments.test.js","startTime":1761555210019,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments Business Rules (refund/lock)"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"Payments Business Rules (refund/lock) refund creates type=refund; totals reflect negative effect","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"refund creates type=refund; totals reflect negative effect"},{"ancestorTitles":["Payments Business Rules (refund/lock)"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Payments Business Rules (refund/lock) PATCH cannot change locked via payload; lock endpoint works","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"PATCH cannot change locked via payload; lock endpoint works"}],"endTime":1761555210767,"message":"","name":"/Users/admin/character crm/tests/payments.rules.e2e.test.js","startTime":1761555210663,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":87,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer GET /api/stocks without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/stocks without role → 403"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer GET /api/stocks with Admin → 200 and ok:true","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /api/stocks with Admin → 200 and ok:true"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":67,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer Feature flag disabled → 404 STOCKS_DISABLED","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Feature flag disabled → 404 STOCKS_DISABLED"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":77,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer POST /api/stocks/adjust with Admin → increments balance","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"POST /api/stocks/adjust with Admin → increments balance"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":60,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer POST /api/stocks/adjust negative beyond zero → 409","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/stocks/adjust negative beyond zero → 409"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":62,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer POST /api/stocks/transfer with Admin → moves stock between locations","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"POST /api/stocks/transfer with Admin → moves stock between locations"},{"ancestorTitles":["Stocks v2 e2e: RBAC + adjust + transfer"],"duration":74,"failureDetails":[],"failureMessages":[],"fullName":"Stocks v2 e2e: RBAC + adjust + transfer RBAC: Manager cannot adjust or transfer → 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"RBAC: Manager cannot adjust or transfer → 403"}],"endTime":1761555211289,"message":"","name":"/Users/admin/character crm/tests/e2e/stocks.v2.rbac.e2e.test.js","startTime":1761555210770,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Contracts: /api/cash","DEV branch"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash DEV branch GET /api/cash returns valid list shape","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /api/cash returns valid list shape"},{"ancestorTitles":["API Contracts: /api/cash","DEV branch"],"duration":54,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash DEV branch POST /api/cash (create) returns valid item shape","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /api/cash (create) returns valid item shape"},{"ancestorTitles":["API Contracts: /api/cash","DEV branch"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash DEV branch PATCH /api/cash/:id returns valid item shape","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"PATCH /api/cash/:id returns valid item shape"},{"ancestorTitles":["API Contracts: /api/cash","DEV branch"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash DEV branch POST /api/cash validates required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/cash validates required fields"},{"ancestorTitles":["API Contracts: /api/cash","Mongo branch (mocked model)"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash Mongo branch (mocked model) POST /api/cash returns valid item shape (mocked model)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /api/cash returns valid item shape (mocked model)"},{"ancestorTitles":["API Contracts: /api/cash","Mongo branch (mocked model)"],"duration":69,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: /api/cash Mongo branch (mocked model) GET /api/cash returns valid list shape (mocked model)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /api/cash returns valid list shape (mocked model)"}],"endTime":1761555211708,"message":"","name":"/Users/admin/character crm/tests/api.contracts.cash.test.js","startTime":1761555211295,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: перемещение между локациями"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"E2E: перемещение между локациями перемещение переносит количество и создаёт оперцию transfer; инварианты","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"перемещение переносит количество и создаёт оперцию transfer; инварианты"},{"ancestorTitles":["E2E: перемещение между локациями"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"E2E: перемещение между локациями ошибка при недостатке на исходной локации","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"ошибка при недостатке на исходной локации"}],"endTime":1761555211755,"message":"","name":"/Users/admin/character crm/tests/e2e/stocks.transfer.e2e.test.js","startTime":1761555211711,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["GET /api/queue/status-actions/metrics (e2e, DEV mem-queue)"],"duration":287,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/queue/status-actions/metrics (e2e, DEV mem-queue) failed jobs increase metrics and trigger WARNING","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"failed jobs increase metrics and trigger WARNING"}],"endTime":1761555212074,"message":"","name":"/Users/admin/character crm/tests/queue.statusActions.metrics.e2e.test.js","startTime":1761555211759,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["services/paymentsService"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService createPayment: success with defaults and env DEFAULT_CASH_REGISTER","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"createPayment: success with defaults and env DEFAULT_CASH_REGISTER"},{"ancestorTitles":["services/paymentsService"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService createPayment: VALIDATION_ERROR on non-positive amount","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"createPayment: VALIDATION_ERROR on non-positive amount"},{"ancestorTitles":["services/paymentsService"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService createPayment: refund uses default articlePath [\"Возвраты\"]","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"createPayment: refund uses default articlePath [\"Возвраты\"]"},{"ancestorTitles":["services/paymentsService"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService updatePayment: strict lock (CASH_LOCK_STRICT=1) forbids update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"updatePayment: strict lock (CASH_LOCK_STRICT=1) forbids update"},{"ancestorTitles":["services/paymentsService"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService updatePayment: forbids changing type and lock flags","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"updatePayment: forbids changing type and lock flags"},{"ancestorTitles":["services/paymentsService"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService refundPayment: disabled by env PAYMENTS_REFUND_ENABLED=0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"refundPayment: disabled by env PAYMENTS_REFUND_ENABLED=0"},{"ancestorTitles":["services/paymentsService"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"services/paymentsService lockPayment: sets flags and writes audit","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"lockPayment: sets flags and writes audit"}],"endTime":1761555212353,"message":"","name":"/Users/admin/character crm/tests/paymentsService.unit.test.js","startTime":1761555212082,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Contracts: Stock Items & Movements","DEV branch"],"duration":82,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Stock Items & Movements DEV branch RBAC: Manager forbidden to read/write warehouse","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"RBAC: Manager forbidden to read/write warehouse"},{"ancestorTitles":["API Contracts: Stock Items & Movements","DEV branch"],"duration":96,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Stock Items & Movements DEV branch Items: list and create adhere to schema","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Items: list and create adhere to schema"},{"ancestorTitles":["API Contracts: Stock Items & Movements","DEV branch"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Stock Items & Movements DEV branch Movements: receipt → issue → adjust adhere to schema and update balances","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"Movements: receipt → issue → adjust adhere to schema and update balances"}],"endTime":1761555212651,"message":"","name":"/Users/admin/character crm/tests/api.contracts.stock.test.js","startTime":1761555212359,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Contracts: Templates CRUD","DEV branch"],"duration":68,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Templates CRUD DEV branch Notify: list and create adhere to schema","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Notify: list and create adhere to schema"},{"ancestorTitles":["API Contracts: Templates CRUD","DEV branch"],"duration":77,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Templates CRUD DEV branch Doc: list/create/get/patch/delete adhere to schema","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Doc: list/create/get/patch/delete adhere to schema"},{"ancestorTitles":["API Contracts: Templates CRUD","Mongo branch"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Templates CRUD Mongo branch Notify: list/create/get/patch/delete adhere to schema","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Notify: list/create/get/patch/delete adhere to schema"},{"ancestorTitles":["API Contracts: Templates CRUD","Mongo branch"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: Templates CRUD Mongo branch Doc: list/create/get/patch/delete adhere to schema","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Doc: list/create/get/patch/delete adhere to schema"}],"endTime":1761555212882,"message":"","name":"/Users/admin/character crm/tests/api.contracts.templates.test.js","startTime":1761555212654,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API /api/order-types contracts (DEV mem branch)"],"duration":46,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types contracts (DEV mem branch) POST invalid startStatusId not in allowed → 400 ORDERTYPE_INVALID_START_STATUS","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST invalid startStatusId not in allowed → 400 ORDERTYPE_INVALID_START_STATUS"},{"ancestorTitles":["API /api/order-types contracts (DEV mem branch)"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types contracts (DEV mem branch) CRUD happy path and code uniqueness","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"status":"passed","title":"CRUD happy path and code uniqueness"},{"ancestorTitles":["API /api/order-types contracts (DEV mem branch)"],"duration":43,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types contracts (DEV mem branch) DELETE system type → 409 SYSTEM_TYPE","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"DELETE system type → 409 SYSTEM_TYPE"}],"endTime":1761555213062,"message":"","name":"/Users/admin/character crm/tests/orderTypes.contract.test.js","startTime":1761555212892,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments feature flag: CASH_LOCK_STRICT","strict=0 (default rules)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments feature flag: CASH_LOCK_STRICT strict=0 (default rules) PATCH locked with payments.lock permission → 200","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"PATCH locked with payments.lock permission → 200"},{"ancestorTitles":["Payments feature flag: CASH_LOCK_STRICT","strict=1 (forbid any PATCH for locked)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Payments feature flag: CASH_LOCK_STRICT strict=1 (forbid any PATCH for locked) PATCH locked even with payments.lock → 403","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"PATCH locked even with payments.lock → 403"}],"endTime":1761555213249,"message":"","name":"/Users/admin/character crm/tests/payments.flags.lock.strict.e2e.test.js","startTime":1761555213064,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments feature flag: PAYMENTS_REFUND_ENABLED"],"duration":71,"failureDetails":[],"failureMessages":[],"fullName":"Payments feature flag: PAYMENTS_REFUND_ENABLED refund disabled (PAYMENTS_REFUND_ENABLED=0) → 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"refund disabled (PAYMENTS_REFUND_ENABLED=0) → 403"},{"ancestorTitles":["Payments feature flag: PAYMENTS_REFUND_ENABLED"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"Payments feature flag: PAYMENTS_REFUND_ENABLED refund enabled (PAYMENTS_REFUND_ENABLED=1) → 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"refund enabled (PAYMENTS_REFUND_ENABLED=1) → 200"}],"endTime":1761555213429,"message":"","name":"/Users/admin/character crm/tests/payments.flags.refund.e2e.test.js","startTime":1761555213254,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["e2e DEV: Docs + Notify → status ready → DRY pdf/email"],"duration":145,"failureDetails":[],"failureMessages":[],"fullName":"e2e DEV: Docs + Notify → status ready → DRY pdf/email templates → patch ready → no SMTP/puppeteer; artifacts saved","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"templates → patch ready → no SMTP/puppeteer; artifacts saved"}],"endTime":1761555213609,"message":"","name":"/Users/admin/character crm/tests/e2e/docs.notify.test.js","startTime":1761555213434,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["services/orderStatusService.changeOrderStatus"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"services/orderStatusService.changeOrderStatus closed_success: sets closed=true and enqueues stockIssue when missing","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"closed_success: sets closed=true and enqueues stockIssue when missing"},{"ancestorTitles":["services/orderStatusService.changeOrderStatus"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"services/orderStatusService.changeOrderStatus closed_fail: sets closed=false and does not add stockIssue","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"closed_fail: sets closed=false and does not add stockIssue"},{"ancestorTitles":["services/orderStatusService.changeOrderStatus"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"services/orderStatusService.changeOrderStatus STATUS_NOT_ALLOWED: rejects when OrderType.allowedStatuses excludes new status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"STATUS_NOT_ALLOWED: rejects when OrderType.allowedStatuses excludes new status"},{"ancestorTitles":["services/orderStatusService.changeOrderStatus"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"services/orderStatusService.changeOrderStatus REOPEN_FORBIDDEN: cannot change from closed_* without orders.reopen role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"REOPEN_FORBIDDEN: cannot change from closed_* without orders.reopen role"},{"ancestorTitles":["services/orderStatusService.changeOrderStatus"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"services/orderStatusService.changeOrderStatus Status not found: 404","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Status not found: 404"}],"endTime":1761555213792,"message":"","name":"/Users/admin/character crm/tests/orderStatusService.unit.test.js","startTime":1761555213615,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["e2e DEV: notify + print DRY_RUN — no SMTP or files"],"duration":117,"failureDetails":[],"failureMessages":[],"fullName":"e2e DEV: notify + print DRY_RUN — no SMTP or files create templates, change status, verify DRY_RUN behavior and files","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"create templates, change status, verify DRY_RUN behavior and files"}],"endTime":1761555213960,"message":"","name":"/Users/admin/character crm/tests/notify.print.e2e.dev.test.js","startTime":1761555213795,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["e2e PROD-like: notify sends email and print saves file"],"duration":137,"failureDetails":[],"failureMessages":[],"fullName":"e2e PROD-like: notify sends email and print saves file create templates, change status, verify email sent and file downloadable","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"create templates, change status, verify email sent and file downloadable"}],"endTime":1761555214139,"message":"","name":"/Users/admin/character crm/tests/notify.print.e2e.prodlike.test.js","startTime":1761555213970,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionsHandler.issueStockFromOrder (unit)"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler.issueStockFromOrder (unit) idempotency: second stockIssue does not double-decrement or duplicate movement","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"idempotency: second stockIssue does not double-decrement or duplicate movement"},{"ancestorTitles":["statusActionsHandler.issueStockFromOrder (unit)"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler.issueStockFromOrder (unit) creates StockItem when missing, decrements correctly, records movement payload","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"creates StockItem when missing, decrements correctly, records movement payload"},{"ancestorTitles":["statusActionsHandler.issueStockFromOrder (unit)"],"duration":54,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler.issueStockFromOrder (unit) skips gracefully when DB not ready and models not mocked","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"skips gracefully when DB not ready and models not mocked"}],"endTime":1761555214337,"message":"","name":"/Users/admin/character crm/tests/statusActions.issueStock.unit.test.js","startTime":1761555214145,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (service branch via mongoose ready)"],"duration":60,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (service branch via mongoose ready) returns 200 ok from service branch","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 ok from service branch"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (service branch via mongoose ready)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (service branch via mongoose ready) returns 404 when order not found (service branch)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 404 when order not found (service branch)"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (DEV branch)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (DEV branch) returns 400 when newStatusCode missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 when newStatusCode missing"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (DEV branch)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (DEV branch) returns 400 when userId missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 when userId missing"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (DEV branch)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (DEV branch) returns 403 REOPEN_FORBIDDEN without orders.reopen","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 REOPEN_FORBIDDEN without orders.reopen"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (DEV branch)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (DEV branch) allows reopen with orders.reopen role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allows reopen with orders.reopen role"},{"ancestorTitles":["API /api/orders contracts","PATCH /api/orders/:id/status (DEV branch)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts PATCH /api/orders/:id/status (DEV branch) returns 403 without orders.changeStatus role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 without orders.changeStatus role"},{"ancestorTitles":["API /api/orders contracts","GET /api/orders/:id/status-logs"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts GET /api/orders/:id/status-logs returns empty array when no logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns empty array when no logs"},{"ancestorTitles":["API /api/orders contracts","GET /api/orders/:id/status-logs"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"API /api/orders contracts GET /api/orders/:id/status-logs returns logs after status changes","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns logs after status changes"}],"endTime":1761555214495,"message":"","name":"/Users/admin/character crm/tests/orders.contract.test.js","startTime":1761555214344,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Shop + Stock e2e: приход → продажа → списание → возврат+adjust"],"duration":116,"failureDetails":[],"failureMessages":[],"fullName":"Shop + Stock e2e: приход → продажа → списание → возврат+adjust end-to-end: receipts per location, quick sale, issue on close, refund + adjust","invocations":1,"location":null,"numPassingAsserts":25,"retryReasons":[],"status":"passed","title":"end-to-end: receipts per location, quick sale, issue on close, refund + adjust"}],"endTime":1761555214658,"message":"","name":"/Users/admin/character crm/tests/e2e/shop.stock.test.js","startTime":1761555214509,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/statuses without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/statuses without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/statuses with settings.statuses:list → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /api/statuses with settings.statuses:list → 200"},{"ancestorTitles":["RBAC e2e"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e POST /api/doc-templates without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/doc-templates without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e POST /api/doc-templates with settings.docs:* → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/doc-templates with settings.docs:* → 200"},{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e POST /api/notify/templates without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/notify/templates without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e POST /api/notify/templates with settings.notify:* → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/notify/templates with settings.notify:* → 200"},{"ancestorTitles":["RBAC e2e"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/queue/status-actions/metrics without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/queue/status-actions/metrics without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/queue/status-actions/metrics with Admin → 200","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"GET /api/queue/status-actions/metrics with Admin → 200"},{"ancestorTitles":["RBAC e2e"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e PATCH /api/orders/:id/status without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"PATCH /api/orders/:id/status without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e PATCH /api/orders/:id/status with orders.changeStatus → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"PATCH /api/orders/:id/status with orders.changeStatus → 200"},{"ancestorTitles":["RBAC e2e"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/orders/:id/files without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/orders/:id/files without role → 403"},{"ancestorTitles":["RBAC e2e"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e GET /api/orders/:id/files with docs.print → 200 and returns {ok:true}","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /api/orders/:id/files with docs.print → 200 and returns {ok:true}"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments GET /api/users without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/users without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments GET /api/users with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /api/users with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/users without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/users without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/users with Admin → 201","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/users with Admin → 201"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments PUT /api/users/:id without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"PUT /api/users/:id without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments PUT /api/users/:id with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"PUT /api/users/:id with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments DELETE /api/users/:id without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"DELETE /api/users/:id without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments DELETE /api/users/:id with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"DELETE /api/users/:id with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments GET /api/roles without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/roles without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments GET /api/roles with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /api/roles with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/roles without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/roles without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/roles with Admin → 201","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/roles with Admin → 201"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments PUT /api/roles/:id without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"PUT /api/roles/:id without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments PUT /api/roles/:id with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"PUT /api/roles/:id with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments DELETE /api/roles/:id without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"DELETE /api/roles/:id without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments DELETE /api/roles/:id with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"DELETE /api/roles/:id with Admin → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/payments without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/payments without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/payments with Finance → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/payments with Finance → 200"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/payments/refund without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /api/payments/refund without role → 403"},{"ancestorTitles":["RBAC e2e — Users, Roles, Payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC e2e — Users, Roles, Payments POST /api/payments/refund with Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/payments/refund with Admin → 200"}],"endTime":1761555214811,"message":"","name":"/Users/admin/character crm/tests/rbac.e2e.test.js","startTime":1761555214667,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["orderStatusService changeOrderStatus (unit)"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"orderStatusService changeOrderStatus (unit) adds stockIssue to actions for closed_success group when missing","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"adds stockIssue to actions for closed_success group when missing"},{"ancestorTitles":["orderStatusService changeOrderStatus (unit)"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"orderStatusService changeOrderStatus (unit) does not duplicate stockIssue when already present","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does not duplicate stockIssue when already present"},{"ancestorTitles":["orderStatusService changeOrderStatus (unit)"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"orderStatusService changeOrderStatus (unit) does not add stockIssue for non closed_success statuses","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does not add stockIssue for non closed_success statuses"}],"endTime":1761555214957,"message":"","name":"/Users/admin/character crm/tests/orderStatusService.actions.unit.test.js","startTime":1761555214817,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["POST /api/payments — PAYMENTS_LOCKED after closeWithoutPayment (DEV)"],"duration":104,"failureDetails":[],"failureMessages":[],"fullName":"POST /api/payments — PAYMENTS_LOCKED after closeWithoutPayment (DEV) returns 400 when order closed without payment","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns 400 when order closed without payment"}],"endTime":1761555215114,"message":"","name":"/Users/admin/character crm/tests/payments.locked.e2e.test.js","startTime":1761555214959,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["stockService.adjust"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"stockService.adjust приход (+) увеличивает количество, создаёт операцию in","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"приход (+) увеличивает количество, создаёт операцию in"},{"ancestorTitles":["stockService.adjust"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.adjust расход (-) уменьшает количество, создаёт операцию out","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"расход (-) уменьшает количество, создаёт операцию out"},{"ancestorTitles":["stockService.adjust"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"stockService.adjust запрет отрицательного остатка: ошибка 409 NEGATIVE_BALANCE_FORBIDDEN","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"запрет отрицательного остатка: ошибка 409 NEGATIVE_BALANCE_FORBIDDEN"},{"ancestorTitles":["stockService.transfer"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.transfer перемещение между локациями: happy path","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"перемещение между локациями: happy path"},{"ancestorTitles":["stockService.transfer"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"stockService.transfer недостаток на исходной локации: ошибка 409 INSUFFICIENT_STOCK","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"недостаток на исходной локации: ошибка 409 INSUFFICIENT_STOCK"}],"endTime":1761555215173,"message":"","name":"/Users/admin/character crm/tests/unit/stockService.adjust.transfer.test.js","startTime":1761555215122,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["e2e: deletion guards for templates when referenced by OrderStatus.actions"],"duration":71,"failureDetails":[],"failureMessages":[],"fullName":"e2e: deletion guards for templates when referenced by OrderStatus.actions DELETE notify template referenced in OrderStatus → 400 TEMPLATE_IN_USE","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"DELETE notify template referenced in OrderStatus → 400 TEMPLATE_IN_USE"},{"ancestorTitles":["e2e: deletion guards for templates when referenced by OrderStatus.actions"],"duration":50,"failureDetails":[],"failureMessages":[],"fullName":"e2e: deletion guards for templates when referenced by OrderStatus.actions DELETE doc template referenced in OrderStatus → 400 TEMPLATE_IN_USE","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"DELETE doc template referenced in OrderStatus → 400 TEMPLATE_IN_USE"}],"endTime":1761555215327,"message":"","name":"/Users/admin/character crm/tests/templates.delete.guard.e2e.test.js","startTime":1761555215176,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API /api/statuses contracts","GET /api/statuses"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts GET /api/statuses returns grouped statuses when authorized (DEV fallback)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns grouped statuses when authorized (DEV fallback)"},{"ancestorTitles":["API /api/statuses contracts","GET /api/statuses"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts GET /api/statuses returns 403 without required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 without required role"},{"ancestorTitles":["API /api/statuses contracts","POST /api/statuses"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts POST /api/statuses creates status (201) and returns matching status schema","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates status (201) and returns matching status schema"},{"ancestorTitles":["API /api/statuses contracts","POST /api/statuses"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts POST /api/statuses returns 400 on invalid code","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 400 on invalid code"},{"ancestorTitles":["API /api/statuses contracts","POST /api/statuses"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts POST /api/statuses returns 400 on invalid group","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 400 on invalid group"},{"ancestorTitles":["API /api/statuses contracts","POST /api/statuses"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts POST /api/statuses returns 409 on duplicate code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 409 on duplicate code"},{"ancestorTitles":["API /api/statuses contracts","POST /api/statuses"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts POST /api/statuses returns 403 without create role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 without create role"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id updates status and returns updated doc","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"updates status and returns updated doc"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id returns 404 when status not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 404 when status not found"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id returns 400 on invalid group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 on invalid group"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id returns 400 when modifying system code/group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 when modifying system code/group"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id returns 409 on duplicate code at update","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 409 on duplicate code at update"},{"ancestorTitles":["API /api/statuses contracts","PUT /api/statuses/:id"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PUT /api/statuses/:id returns 403 without update role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 without update role"},{"ancestorTitles":["API /api/statuses contracts","PATCH /api/statuses/reorder"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PATCH /api/statuses/reorder batch reorder updates statuses and reports ok","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"batch reorder updates statuses and reports ok"},{"ancestorTitles":["API /api/statuses contracts","PATCH /api/statuses/reorder"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PATCH /api/statuses/reorder returns 400 when array of items is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 when array of items is missing"},{"ancestorTitles":["API /api/statuses contracts","PATCH /api/statuses/reorder"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PATCH /api/statuses/reorder reports item error when status not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"reports item error when status not found"},{"ancestorTitles":["API /api/statuses contracts","PATCH /api/statuses/reorder"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PATCH /api/statuses/reorder returns error entry when modifying system group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns error entry when modifying system group"},{"ancestorTitles":["API /api/statuses contracts","PATCH /api/statuses/reorder"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/statuses contracts PATCH /api/statuses/reorder returns 403 without reorder role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 403 without reorder role"}],"endTime":1761555215457,"message":"","name":"/Users/admin/character crm/tests/statuses.contract.test.js","startTime":1761555215331,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Core flow (e2e): клиент→заказ→позиции→платёж→статусы→закрытие→таймлайн"],"duration":126,"failureDetails":[],"failureMessages":[],"fullName":"Core flow (e2e): клиент→заказ→позиции→платёж→статусы→закрытие→таймлайн end-to-end core flow","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"end-to-end core flow"}],"endTime":1761555215622,"message":"","name":"/Users/admin/character crm/tests/core.flow.e2e.test.js","startTime":1761555215466,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Orders lifecycle e2e — create → pay → refund → close"],"duration":83,"failureDetails":[],"failureMessages":[],"fullName":"Orders lifecycle e2e — create → pay → refund → close Full lifecycle with new client and item","invocations":1,"location":null,"numPassingAsserts":26,"retryReasons":[],"status":"passed","title":"Full lifecycle with new client and item"}],"endTime":1761555215774,"message":"","name":"/Users/admin/character crm/tests/orders.lifecycle.e2e.test.js","startTime":1761555215649,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Contracts: GET /api/queue/status-actions/metrics"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"API Contracts: GET /api/queue/status-actions/metrics returns raw metrics object per schema","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"returns raw metrics object per schema"}],"endTime":1761555215921,"message":"","name":"/Users/admin/character crm/tests/api.contracts.queue.metrics.test.js","startTime":1761555215777,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth contracts: response formats"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Auth contracts: response formats POST /api/auth/register-first → ok:true + user shape","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /api/auth/register-first → ok:true + user shape"},{"ancestorTitles":["Auth contracts: response formats"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Auth contracts: response formats POST /api/auth/login → includes accessToken/access and refreshToken/refresh (duplicates)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"POST /api/auth/login → includes accessToken/access and refreshToken/refresh (duplicates)"},{"ancestorTitles":["Auth contracts: response formats"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Auth contracts: response formats POST /api/auth/refresh → returns accessToken/access","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"POST /api/auth/refresh → returns accessToken/access"},{"ancestorTitles":["Auth contracts: response formats"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Auth contracts: response formats POST /api/auth/refresh invalid → 401 ok:false + error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/auth/refresh invalid → 401 ok:false + error"}],"endTime":1761555216046,"message":"","name":"/Users/admin/character crm/tests/auth.contract.test.js","startTime":1761555215923,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionsHandler: missing template references throw"],"duration":59,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler: missing template references throw notify: missing templateId/code → throws INVALID_REFERENCE_NOTIFY","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"notify: missing templateId/code → throws INVALID_REFERENCE_NOTIFY"},{"ancestorTitles":["statusActionsHandler: missing template references throw"],"duration":34,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler: missing template references throw print: missing docId/code → throws INVALID_REFERENCE_PRINT","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"print: missing docId/code → throws INVALID_REFERENCE_PRINT"}],"endTime":1761555216154,"message":"","name":"/Users/admin/character crm/tests/statusActionsHandler.validation.unit.test.js","startTime":1761555216049,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PATCH /api/orders/:id/status — reopen permission (DEV)"],"duration":68,"failureDetails":[],"failureMessages":[],"fullName":"PATCH /api/orders/:id/status — reopen permission (DEV) forbids reopen closed_paid → in_work without orders.reopen","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"forbids reopen closed_paid → in_work without orders.reopen"},{"ancestorTitles":["PATCH /api/orders/:id/status — reopen permission (DEV)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PATCH /api/orders/:id/status — reopen permission (DEV) allows reopen closed_paid → in_work with orders.reopen","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"allows reopen closed_paid → in_work with orders.reopen"}],"endTime":1761555216264,"message":"","name":"/Users/admin/character crm/tests/orders.reopen.e2e.test.js","startTime":1761555216162,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Контракты /api/stocks*"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/stocks* GET /api/stocks возвращает список items","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"GET /api/stocks возвращает список items"},{"ancestorTitles":["Контракты /api/stocks*"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/stocks* POST /api/stocks/adjust — валидация: qty!=0","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /api/stocks/adjust — валидация: qty!=0"},{"ancestorTitles":["Контракты /api/stocks*"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/stocks* POST /api/stocks/adjust — ошибка 409 NEGATIVE_BALANCE_FORBIDDEN","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /api/stocks/adjust — ошибка 409 NEGATIVE_BALANCE_FORBIDDEN"},{"ancestorTitles":["Контракты /api/stocks*"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/stocks* POST /api/stocks/transfer — успешный ответ с items","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"POST /api/stocks/transfer — успешный ответ с items"},{"ancestorTitles":["Контракты /api/stocks*"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/stocks* Auth guard: 401 без пользователя","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Auth guard: 401 без пользователя"}],"endTime":1761555216379,"message":"","name":"/Users/admin/character crm/tests/api.contracts.stocks.test.js","startTime":1761555216278,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","RBAC: /api/payments"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) RBAC: /api/payments GET /api/payments без роли → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/payments без роли → 403"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","RBAC: /api/payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) RBAC: /api/payments GET /api/payments роль Manager → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /api/payments роль Manager → 200"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","RBAC: /api/payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) RBAC: /api/payments GET /api/payments роль Finance → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /api/payments роль Finance → 200"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Данные: создание платежей в разных локациях"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Данные: создание платежей в разных локациях создать income loc-A (120)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"создать income loc-A (120)"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Данные: создание платежей в разных локациях"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Данные: создание платежей в разных локациях создать expense loc-A (20)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"создать expense loc-A (20)"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Данные: создание платежей в разных локациях"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Данные: создание платежей в разных локациях создать refund loc-B (30)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"создать refund loc-B (30)"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Фильтр locationId: список и totals"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Фильтр locationId: список и totals GET /api/payments?locationId=loc-A (Finance) — только loc-A","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"GET /api/payments?locationId=loc-A (Finance) — только loc-A"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Cashflow report: группировки по кассам и итог по фильтру"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Cashflow report: группировки по кассам и итог по фильтру GET /api/reports/cashflow?locationId=loc-A — balance=100, касса dev-main","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"GET /api/reports/cashflow?locationId=loc-A — balance=100, касса dev-main"},{"ancestorTitles":["RBAC + Locations + Reports e2e (DEV)","Сохранение артефакта репорта"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"RBAC + Locations + Reports e2e (DEV) Сохранение артефакта репорта write storage/reports/rbac-locations-reports.md","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"write storage/reports/rbac-locations-reports.md"}],"endTime":1761555216474,"message":"","name":"/Users/admin/character crm/tests/e2e/rbac.locations.reports.test.js","startTime":1761555216384,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments RBAC e2e","GET /api/payments"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e GET /api/payments without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"without role → 403"},{"ancestorTitles":["Payments RBAC e2e","GET /api/payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e GET /api/payments Manager → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Manager → 200"},{"ancestorTitles":["Payments RBAC e2e","GET /api/payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e GET /api/payments Finance → 200","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Finance → 200"},{"ancestorTitles":["Payments RBAC e2e","GET /api/payments"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e GET /api/payments Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Admin → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments (create)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments (create) without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"without role → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments (create)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments (create) Manager → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Manager → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments (create)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments (create) Finance → 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Finance → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments (create)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments (create) Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Admin → 200"},{"ancestorTitles":["Payments RBAC e2e","PATCH /api/payments/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e PATCH /api/payments/:id without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"without role → 403"},{"ancestorTitles":["Payments RBAC e2e","PATCH /api/payments/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e PATCH /api/payments/:id Manager → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Manager → 403"},{"ancestorTitles":["Payments RBAC e2e","PATCH /api/payments/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e PATCH /api/payments/:id Finance → 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Finance → 200"},{"ancestorTitles":["Payments RBAC e2e","PATCH /api/payments/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e PATCH /api/payments/:id Admin → 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Admin → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/:id/lock"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/:id/lock without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"without role → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/:id/lock"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/:id/lock Manager → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Manager → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/:id/lock"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/:id/lock Finance → 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Finance → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/:id/lock"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/:id/lock Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Admin → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/refund"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/refund without role → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"without role → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/refund"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/refund Manager → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Manager → 403"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/refund"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/refund Finance → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Finance → 200"},{"ancestorTitles":["Payments RBAC e2e","POST /api/payments/refund"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments RBAC e2e POST /api/payments/refund Admin → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Admin → 200"}],"endTime":1761555216576,"message":"","name":"/Users/admin/character crm/tests/payments.rbac.e2e.test.js","startTime":1761555216476,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Shop sales e2e: list/create/get/refund"],"duration":87,"failureDetails":[],"failureMessages":[],"fullName":"Shop sales e2e: list/create/get/refund create sale → 201 and id is returned","invocations":1,"location":null,"numPassingAsserts":23,"retryReasons":[],"status":"passed","title":"create sale → 201 and id is returned"}],"endTime":1761555216691,"message":"","name":"/Users/admin/character crm/tests/e2e/shop.sales.e2e.test.js","startTime":1761555216578,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TTL cache e2e — statuses & doc-templates"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"TTL cache e2e — statuses & doc-templates GET /api/statuses — second request served from cache (hit)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"GET /api/statuses — second request served from cache (hit)"},{"ancestorTitles":["TTL cache e2e — statuses & doc-templates"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"TTL cache e2e — statuses & doc-templates GET /api/statuses — cache invalidated after POST","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"GET /api/statuses — cache invalidated after POST"},{"ancestorTitles":["TTL cache e2e — statuses & doc-templates"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"TTL cache e2e — statuses & doc-templates GET /api/doc-templates — hit after warm, miss after POST","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"GET /api/doc-templates — hit after warm, miss after POST"}],"endTime":1761555216768,"message":"","name":"/Users/admin/character crm/tests/cache.statuses.docTemplates.e2e.test.js","startTime":1761555216695,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API /api/order-types e2e (DB branch via mongoose ready)"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types e2e (DB branch via mongoose ready) DELETE system type → 409 SYSTEM_TYPE","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"DELETE system type → 409 SYSTEM_TYPE"},{"ancestorTitles":["API /api/order-types e2e (DB branch via mongoose ready)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types e2e (DB branch via mongoose ready) DELETE type in use by orders → 409 ORDERTYPE_IN_USE","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"DELETE type in use by orders → 409 ORDERTYPE_IN_USE"},{"ancestorTitles":["API /api/order-types e2e (DB branch via mongoose ready)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types e2e (DB branch via mongoose ready) POST /api/orders with orderTypeId sets initial status from startStatusId","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /api/orders with orderTypeId sets initial status from startStatusId"},{"ancestorTitles":["API /api/order-types e2e (DB branch via mongoose ready)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"API /api/order-types e2e (DB branch via mongoose ready) PATCH /api/orders/:id/status to not-allowed → 409 STATUS_NOT_ALLOWED","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"PATCH /api/orders/:id/status to not-allowed → 409 STATUS_NOT_ALLOWED"}],"endTime":1761555216865,"message":"","name":"/Users/admin/character crm/tests/orderTypes.e2e.test.js","startTime":1761555216770,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments feature flag: DEFAULT_CASH_REGISTER"],"duration":84,"failureDetails":[],"failureMessages":[],"fullName":"Payments feature flag: DEFAULT_CASH_REGISTER auto-fill cashRegisterId in DEV when not provided","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"auto-fill cashRegisterId in DEV when not provided"}],"endTime":1761555216981,"message":"","name":"/Users/admin/character crm/tests/payments.flags.defaultCash.e2e.test.js","startTime":1761555216868,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Clients API e2e — CRUD in DEV mode"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Clients API e2e — CRUD in DEV mode GET /api/clients without permission → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /api/clients without permission → 403"},{"ancestorTitles":["Clients API e2e — CRUD in DEV mode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Clients API e2e — CRUD in DEV mode GET /api/clients with clients.read → 200 and returns items","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /api/clients with clients.read → 200 and returns items"},{"ancestorTitles":["Clients API e2e — CRUD in DEV mode"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Clients API e2e — CRUD in DEV mode POST → GET by id → PUT → DELETE flow with clients.write","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"POST → GET by id → PUT → DELETE flow with clients.write"}],"endTime":1761555217056,"message":"","name":"/Users/admin/character crm/tests/clients.crud.e2e.test.js","startTime":1761555216983,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments flow e2e — income + refund + balance (DEV)"],"duration":71,"failureDetails":[],"failureMessages":[],"fullName":"Payments flow e2e — income + refund + balance (DEV) Create income, create refund, verify balance totals","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"Create income, create refund, verify balance totals"}],"endTime":1761555217157,"message":"","name":"/Users/admin/character crm/tests/payments.flow.e2e.test.js","startTime":1761555217059,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payroll accruals and summary e2e"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"Payroll accruals and summary e2e create accruals and summarize by employee","invocations":1,"location":null,"numPassingAsserts":19,"retryReasons":[],"status":"passed","title":"create accruals and summarize by employee"}],"endTime":1761555217263,"message":"","name":"/Users/admin/character crm/tests/e2e/payroll.summary.e2e.test.js","startTime":1761555217159,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Items (e2e): list/create/patch in DEV mode"],"duration":64,"failureDetails":[],"failureMessages":[],"fullName":"Items (e2e): list/create/patch in DEV mode create → list → patch","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"create → list → patch"}],"endTime":1761555217357,"message":"","name":"/Users/admin/character crm/tests/e2e/items.e2e.test.js","startTime":1761555217265,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionsHandler — chargeInit (Mongo-only mocks)"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — chargeInit (Mongo-only mocks) creates payment with provided amount","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"creates payment with provided amount"},{"ancestorTitles":["statusActionsHandler — chargeInit (Mongo-only mocks)"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — chargeInit (Mongo-only mocks) throws when payments are locked (via closeWithoutPayment)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"throws when payments are locked (via closeWithoutPayment)"}],"endTime":1761555217448,"message":"","name":"/Users/admin/character crm/tests/statusActions.chargeInit.dev.test.js","startTime":1761555217359,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["queueMetrics service (BullMQ mocked)"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"queueMetrics service (BullMQ mocked) computes metrics from BullMQ API (counts, last N, 24h/hour)","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"computes metrics from BullMQ API (counts, last N, 24h/hour)"},{"ancestorTitles":["queueMetrics service (BullMQ mocked)"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"queueMetrics service (BullMQ mocked) DEV mem snapshot fallback","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"DEV mem snapshot fallback"}],"endTime":1761555217540,"message":"","name":"/Users/admin/character crm/tests/queue.statusActions.metrics.unit.test.js","startTime":1761555217454,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments Lock Rules e2e"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Payments Lock Rules e2e lock then patch with Manager (no payments.write) → 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"lock then patch with Manager (no payments.write) → 403"},{"ancestorTitles":["Payments Lock Rules e2e"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Payments Lock Rules e2e lock then patch with Admin (has payments.lock) → 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lock then patch with Admin (has payments.lock) → 200"}],"endTime":1761555217636,"message":"","name":"/Users/admin/character crm/tests/payments.lock.rules.e2e.test.js","startTime":1761555217542,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Контракты /api/reports/stocks/*"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/reports/stocks/* GET /summary — агрегаты по локациям","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"GET /summary — агрегаты по локациям"},{"ancestorTitles":["Контракты /api/reports/stocks/*"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/reports/stocks/* GET /turnover — агрегаты по операциям и группировка byItem","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"GET /turnover — агрегаты по операциям и группировка byItem"},{"ancestorTitles":["Контракты /api/reports/stocks/*"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/reports/stocks/* GET /turnover с from/to — фильтрация по периоду","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"GET /turnover с from/to — фильтрация по периоду"},{"ancestorTitles":["Контракты /api/reports/stocks/*"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Контракты /api/reports/stocks/* Auth guard: 401 без пользователя","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Auth guard: 401 без пользователя"}],"endTime":1761555217727,"message":"","name":"/Users/admin/character crm/tests/api.contracts.reports.stocks.test.js","startTime":1761555217638,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["e2e PROD-like: Stock → Shop → Staff"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"e2e PROD-like: Stock → Shop → Staff поступление → продажа → списание → начисление","invocations":1,"location":null,"numPassingAsserts":15,"retryReasons":[],"status":"passed","title":"поступление → продажа → списание → начисление"}],"endTime":1761555217811,"message":"","name":"/Users/admin/character crm/tests/stock.shop.staff.e2e.prodlike.test.js","startTime":1761555217730,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payroll accrual (e2e): правило 10% на closed_success"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"Payroll accrual (e2e): правило 10% на closed_success закрытие заказа создаёт один PayrollAccrual с 10% от суммы","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"закрытие заказа создаёт один PayrollAccrual с 10% от суммы"}],"endTime":1761555217877,"message":"","name":"/Users/admin/character crm/tests/e2e/payroll.accrual.test.js","startTime":1761555217815,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["print adapter unit tests (Mongo-only, DRY_RUN)"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"print adapter unit tests (Mongo-only, DRY_RUN) DRY_RUN=1: does not invoke puppeteer or fileStore","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"DRY_RUN=1: does not invoke puppeteer or fileStore"},{"ancestorTitles":["print adapter unit tests (Mongo-only, DRY_RUN)"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"print adapter unit tests (Mongo-only, DRY_RUN) DRY_RUN=0: generates PDF via puppeteer and saves via fileStore","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"DRY_RUN=0: generates PDF via puppeteer and saves via fileStore"}],"endTime":1761555217973,"message":"","name":"/Users/admin/character crm/tests/print.unit.test.js","startTime":1761555217880,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["notify adapter unit tests (Mongo-only, DRY_RUN)"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"notify adapter unit tests (Mongo-only, DRY_RUN) DRY_RUN=1: does not send via nodemailer","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"DRY_RUN=1: does not send via nodemailer"},{"ancestorTitles":["notify adapter unit tests (Mongo-only, DRY_RUN)"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"notify adapter unit tests (Mongo-only, DRY_RUN) DRY_RUN=0: sends email via nodemailer with rendered subject/html","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"DRY_RUN=0: sends email via nodemailer with rendered subject/html"}],"endTime":1761555218052,"message":"","name":"/Users/admin/character crm/tests/notify.unit.test.js","startTime":1761555217979,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FieldSchemas e2e (DEV)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchemas e2e (DEV) POST /api/fields — list/multilist must have options → 400 FIELD_OPTIONS_REQUIRED","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /api/fields — list/multilist must have options → 400 FIELD_OPTIONS_REQUIRED"},{"ancestorTitles":["FieldSchemas e2e (DEV)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchemas e2e (DEV) CRUD + versions + activate/deactivate + delete guard","invocations":1,"location":null,"numPassingAsserts":29,"retryReasons":[],"status":"passed","title":"CRUD + versions + activate/deactivate + delete guard"}],"endTime":1761555218127,"message":"","name":"/Users/admin/character crm/tests/fields.schemas.e2e.test.js","startTime":1761555218058,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Cash delete guard e2e"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Cash delete guard e2e DELETE /api/cash/:id → 409 CASH_IN_USE если есть платежи","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"DELETE /api/cash/:id → 409 CASH_IN_USE если есть платежи"}],"endTime":1761555218216,"message":"","name":"/Users/admin/character crm/tests/cash.delete.guard.e2e.test.js","startTime":1761555218129,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DELETE /api/statuses/:id"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/statuses/:id returns 400 STATUS_IN_USE when orders exist","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 400 STATUS_IN_USE when orders exist"},{"ancestorTitles":["DELETE /api/statuses/:id"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/statuses/:id returns 400 STATUS_IN_TYPES when hook says in types","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 400 STATUS_IN_TYPES when hook says in types"},{"ancestorTitles":["DELETE /api/statuses/:id"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/statuses/:id deletes when no orders and not in types","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"deletes when no orders and not in types"}],"endTime":1761555218285,"message":"","name":"/Users/admin/character crm/tests/statuses.delete.test.js","startTime":1761555218218,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["configValidator — validateEnv and logEnvValidation"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"configValidator — validateEnv and logEnvValidation DEV mode with proper env yields ok=true and no warnings","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"DEV mode with proper env yields ok=true and no warnings"},{"ancestorTitles":["configValidator — validateEnv and logEnvValidation"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"configValidator — validateEnv and logEnvValidation Missing core configs produce warnings and ok=false","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Missing core configs produce warnings and ok=false"},{"ancestorTitles":["configValidator — validateEnv and logEnvValidation"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"configValidator — validateEnv and logEnvValidation Conflict between MONGO_URI and MONGO_URL is reported as warning","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Conflict between MONGO_URI and MONGO_URL is reported as warning"},{"ancestorTitles":["configValidator — validateEnv and logEnvValidation"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"configValidator — validateEnv and logEnvValidation logEnvValidation prints info on ok=true and warns on problems","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"logEnvValidation prints info on ok=true and warns on problems"}],"endTime":1761555218360,"message":"","name":"/Users/admin/character crm/tests/configValidator.unit.test.js","startTime":1761555218290,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Order Close -> V2 Stock Issue"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Order Close -> V2 Stock Issue calls V2 stock issue and decrements balance","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"calls V2 stock issue and decrements balance"}],"endTime":1761555218435,"message":"","name":"/Users/admin/character crm/tests/e2e/order.close.stock.v2.e2e.test.js","startTime":1761555218362,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Dictionaries e2e (DEV)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Dictionaries e2e (DEV) CRUD flow + conflicts + get by code","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"status":"passed","title":"CRUD flow + conflicts + get by code"}],"endTime":1761555218516,"message":"","name":"/Users/admin/character crm/tests/dicts.e2e.test.js","startTime":1761555218439,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth e2e: refresh token flow"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Auth e2e: refresh token flow Login → obtain refresh; POST /api/auth/refresh → new access + duplicates","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"Login → obtain refresh; POST /api/auth/refresh → new access + duplicates"},{"ancestorTitles":["Auth e2e: refresh token flow"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Auth e2e: refresh token flow Invalid/expired refresh → 401 with error","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Invalid/expired refresh → 401 with error"}],"endTime":1761555218591,"message":"","name":"/Users/admin/character crm/tests/auth.refresh.e2e.test.js","startTime":1761555218517,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionsHandler — closeWithoutPayment"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — closeWithoutPayment sets closed.success=false and paymentsLocked=true (DEV memory)","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"sets closed.success=false and paymentsLocked=true (DEV memory)"}],"endTime":1761555218674,"message":"","name":"/Users/admin/character crm/tests/statusActions.closeWithoutPayment.test.js","startTime":1761555218592,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth e2e: register-first + login"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"Auth e2e: register-first + login POST /api/auth/register-first → 201, then /login → tokens + duplicates","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"POST /api/auth/register-first → 201, then /login → tokens + duplicates"},{"ancestorTitles":["Auth e2e: register-first + login"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Auth e2e: register-first + login Repeat POST /api/auth/register-first → 400 USERS_ALREADY_EXIST","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Repeat POST /api/auth/register-first → 400 USERS_ALREADY_EXIST"}],"endTime":1761555218741,"message":"","name":"/Users/admin/character crm/tests/auth.register-first.e2e.test.js","startTime":1761555218677,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход create → reserve → close(out)","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"create → reserve → close(out)"},{"ancestorTitles":["E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход cancel/delete → unreserve","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"cancel/delete → unreserve"},{"ancestorTitles":["E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход return/refund → in (идемпотентно)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"return/refund → in (идемпотентно)"},{"ancestorTitles":["E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"E2E: заказ — резерв → списание (issue), отмена → unreserve, возврат/рефанд → приход инварианты остатков: quantity>=0, reserved>=0, available>=0","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"инварианты остатков: quantity>=0, reserved>=0, available>=0"}],"endTime":1761555218789,"message":"","name":"/Users/admin/character crm/tests/e2e/orders.stock.lifecycle.test.js","startTime":1761555218745,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionsHandler — chargeInit (Mongo branch)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — chargeInit (Mongo branch) creates payment using remaining when amount not provided","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"creates payment using remaining when amount not provided"},{"ancestorTitles":["statusActionsHandler — chargeInit (Mongo branch)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — chargeInit (Mongo branch) throws PAYMENTS_LOCKED when order has paymentsLocked=true","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws PAYMENTS_LOCKED when order has paymentsLocked=true"},{"ancestorTitles":["statusActionsHandler — chargeInit (Mongo branch)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"statusActionsHandler — chargeInit (Mongo branch) skips with NO_REMAINING when fully paid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"skips with NO_REMAINING when fully paid"}],"endTime":1761555218849,"message":"","name":"/Users/admin/character crm/tests/statusActions.chargeInit.mongo.test.js","startTime":1761555218797,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["changeOrderStatus orders.reopen permission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"changeOrderStatus orders.reopen permission throws 403 when reopening from closed_success without orders.reopen","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws 403 when reopening from closed_success without orders.reopen"},{"ancestorTitles":["changeOrderStatus orders.reopen permission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"changeOrderStatus orders.reopen permission passes when reopening from closed_fail with orders.reopen","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"passes when reopening from closed_fail with orders.reopen"},{"ancestorTitles":["changeOrderStatus orders.reopen permission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"changeOrderStatus orders.reopen permission passes when current status is not closed_* without orders.reopen","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"passes when current status is not closed_* without orders.reopen"}],"endTime":1761555218903,"message":"","name":"/Users/admin/character crm/tests/orderStatusService.reopen.test.js","startTime":1761555218857,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService summaryByLocation — корректная агрегация и расчёт available","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"summaryByLocation — корректная агрегация и расчёт available"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService summaryByLocation — limit применяется и кап на 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"summaryByLocation — limit применяется и кап на 200"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService summaryByLocation — без подключения Mongo возвращает пустые группы","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"summaryByLocation — без подключения Mongo возвращает пустые группы"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService turnover — корректные totals и группировка по item","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"turnover — корректные totals и группировка по item"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService turnover — фильтрация по from/to","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"turnover — фильтрация по from/to"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService turnover — invalid from/to не применяет фильтр и учитывает все операции","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"turnover — invalid from/to не применяет фильтр и учитывает все операции"},{"ancestorTitles":["unit: services/reports/stocksReportService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"unit: services/reports/stocksReportService turnover — без подключения Mongo возвращает пустые данные","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"turnover — без подключения Mongo возвращает пустые данные"}],"endTime":1761555218961,"message":"","name":"/Users/admin/character crm/tests/unit/reports.stocksReportService.unit.test.js","startTime":1761555218905,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FieldSchema/Dictionary — invalid cases"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — invalid cases FieldSchema: list without options → validation error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"FieldSchema: list without options → validation error"},{"ancestorTitles":["FieldSchema/Dictionary — invalid cases"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — invalid cases FieldSchema: multilist with empty options → validation error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"FieldSchema: multilist with empty options → validation error"},{"ancestorTitles":["FieldSchema/Dictionary — invalid cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — invalid cases Dictionary: missing code → validation error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Dictionary: missing code → validation error"}],"endTime":1761555219011,"message":"","name":"/Users/admin/character crm/tests/models/fields.invalid.test.js","startTime":1761555218964,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusActionQueue (unit)"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"statusActionQueue (unit) inline processing in tests when ENABLE_STATUS_QUEUE != 1","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"inline processing in tests when ENABLE_STATUS_QUEUE != 1"}],"endTime":1761555219059,"message":"","name":"/Users/admin/character crm/tests/queues.statusActionQueue.unit.test.js","startTime":1761555219012,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["stockService.issueFromOrder"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"stockService.issueFromOrder списывает остаток и уменьшает резерв; создаёт out операции","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"списывает остаток и уменьшает резерв; создаёт out операции"},{"ancestorTitles":["stockService.issueFromOrder"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.issueFromOrder идемпотентность: повторный вызов не создаёт дубль операции и не меняет баланс","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"идемпотентность: повторный вызов не создаёт дубль операции и не меняет баланс"},{"ancestorTitles":["stockService.issueFromOrder"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.issueFromOrder недостаток остатка: { ok:false, statusCode:409 } и баланс не меняется","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"недостаток остатка: { ok:false, statusCode:409 } и баланс не меняется"},{"ancestorTitles":["stockService.returnFromRefund"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.returnFromRefund возвращает на склад и создаёт return операции","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"возвращает на склад и создаёт return операции"},{"ancestorTitles":["stockService.returnFromRefund"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"stockService.returnFromRefund идемпотентность по paymentId: повторный вызов не создаёт дубль","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"идемпотентность по paymentId: повторный вызов не создаёт дубль"}],"endTime":1761555219108,"message":"","name":"/Users/admin/character crm/tests/unit/stockService.issue.return.unit.test.js","startTime":1761555219061,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["reservationService.reserveForOrder"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.reserveForOrder резервирует доступное количество; available не уходит в минус","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"резервирует доступное количество; available не уходит в минус"},{"ancestorTitles":["reservationService.reserveForOrder"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.reserveForOrder ошибка при недостатке доступного: 409 INSUFFICIENT_STOCK","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"ошибка при недостатке доступного: 409 INSUFFICIENT_STOCK"},{"ancestorTitles":["reservationService.releaseForOrder"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.releaseForOrder освобождает резерв; кламп до >=0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"освобождает резерв; кламп до >=0"},{"ancestorTitles":["reservationService.applyDiffForOrderEdit"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.applyDiffForOrderEdit увеличение дельты резервов при достатке доступного","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"увеличение дельты резервов при достатке доступного"},{"ancestorTitles":["reservationService.applyDiffForOrderEdit"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.applyDiffForOrderEdit ошибка при увеличении дельты сверх доступного: 409 INSUFFICIENT_STOCK","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"ошибка при увеличении дельты сверх доступного: 409 INSUFFICIENT_STOCK"},{"ancestorTitles":["reservationService.applyDiffForOrderEdit"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"reservationService.applyDiffForOrderEdit уменьшение дельты резервов","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"уменьшение дельты резервов"}],"endTime":1761555219150,"message":"","name":"/Users/admin/character crm/tests/unit/reservationService.unit.test.js","startTime":1761555219111,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FieldSchema/Dictionary — valid cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — valid cases FieldSchema: list type requires options — valid when provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"FieldSchema: list type requires options — valid when provided"},{"ancestorTitles":["FieldSchema/Dictionary — valid cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — valid cases FieldSchema: multilist with options — valid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"FieldSchema: multilist with options — valid"},{"ancestorTitles":["FieldSchema/Dictionary — valid cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"FieldSchema/Dictionary — valid cases Dictionary: code normalized (trim+lower), values accepted","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Dictionary: code normalized (trim+lower), values accepted"}],"endTime":1761555219208,"message":"","name":"/Users/admin/character crm/tests/models/fields.valid.test.js","startTime":1761555219152,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["fieldSchemaProvider — getActiveSchema and caching"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"fieldSchemaProvider — getActiveSchema and caching returns schema when mongoose ready and caches subsequent calls","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns schema when mongoose ready and caches subsequent calls"},{"ancestorTitles":["fieldSchemaProvider — getActiveSchema and caching"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"fieldSchemaProvider — getActiveSchema and caching returns null when mongoose not ready","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns null when mongoose not ready"}],"endTime":1761555219224,"message":"","name":"/Users/admin/character crm/tests/fieldSchemaProvider.unit.test.js","startTime":1761555219211,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ENV config validator"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ENV config validator DEV: minimal config with AUTH_DEV_MODE=1 logs warnings but ok for DEV","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"DEV: minimal config with AUTH_DEV_MODE=1 logs warnings but ok for DEV"},{"ancestorTitles":["ENV config validator"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ENV config validator PROD-like: full config yields Config OK with no warnings","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"PROD-like: full config yields Config OK with no warnings"},{"ancestorTitles":["ENV config validator"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ENV config validator Conflict: both MONGO_URI and MONGO_URL yields warning","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Conflict: both MONGO_URI and MONGO_URL yields warning"},{"ancestorTitles":["ENV config validator"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ENV config validator Notify: NOTIFY_DRY_RUN=0 without SMTP warns","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Notify: NOTIFY_DRY_RUN=0 without SMTP warns"}],"endTime":1761555219245,"message":"","name":"/Users/admin/character crm/tests/env.validator.test.js","startTime":1761555219226,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusDeletionGuard — isStatusInOrderTypes"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — isStatusInOrderTypes returns false when code is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns false when code is empty"},{"ancestorTitles":["statusDeletionGuard — isStatusInOrderTypes"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — isStatusInOrderTypes returns false when OrderType module is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false when OrderType module is missing"},{"ancestorTitles":["statusDeletionGuard — isStatusInOrderTypes"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — isStatusInOrderTypes returns true when OrderType.exists is truthy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true when OrderType.exists is truthy"},{"ancestorTitles":["statusDeletionGuard — isStatusInOrderTypes"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — isStatusInOrderTypes returns false when OrderType.exists is falsy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false when OrderType.exists is falsy"},{"ancestorTitles":["statusDeletionGuard — isStatusInOrderTypes"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — isStatusInOrderTypes returns false and warns on unexpected error inside check","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns false and warns on unexpected error inside check"}],"endTime":1761555219259,"message":"","name":"/Users/admin/character crm/tests/statusDeletionGuard.unit.test.js","startTime":1761555219246,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["client smoke"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"client smoke test runner is wired","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"test runner is wired"}],"endTime":1761555219277,"message":"","name":"/Users/admin/character crm/client/src/__tests__/smoke.test.js","startTime":1761555219261,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["telegramNotify — sendMessage"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"telegramNotify — sendMessage returns CONFIG_MISSING when token or chatId not set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns CONFIG_MISSING when token or chatId not set"},{"ancestorTitles":["telegramNotify — sendMessage"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"telegramNotify — sendMessage DRY_RUN=1 skips sending and returns ok:true","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"DRY_RUN=1 skips sending and returns ok:true"},{"ancestorTitles":["telegramNotify — sendMessage"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"telegramNotify — sendMessage success flow: https.request returns {ok:true}","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"success flow: https.request returns {ok:true}"},{"ancestorTitles":["telegramNotify — sendMessage"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"telegramNotify — sendMessage error response: https returns ok:false JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"error response: https returns ok:false JSON"},{"ancestorTitles":["telegramNotify — sendMessage"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"telegramNotify — sendMessage network error: request emits error and promise rejects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"network error: request emits error and promise rejects"}],"endTime":1761555219293,"message":"","name":"/Users/admin/character crm/tests/telegramNotify.unit.test.js","startTime":1761555219278,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Swagger contracts: Fields & Dicts"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Swagger contracts: Fields & Dicts basic spec info","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"basic spec info"},{"ancestorTitles":["Swagger contracts: Fields & Dicts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Swagger contracts: Fields & Dicts components.schemas contain Field/Dict models","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"components.schemas contain Field/Dict models"},{"ancestorTitles":["Swagger contracts: Fields & Dicts"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Swagger contracts: Fields & Dicts paths include Fields endpoints","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"status":"passed","title":"paths include Fields endpoints"},{"ancestorTitles":["Swagger contracts: Fields & Dicts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Swagger contracts: Fields & Dicts paths include Dicts endpoints","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"paths include Dicts endpoints"}],"endTime":1761555219310,"message":"","name":"/Users/admin/character crm/tests/api.contracts.fields.dicts.swagger.test.js","startTime":1761555219295,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ttlCache — basic operations and expiry"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ttlCache — basic operations and expiry getDefaultTTL returns default when env invalid and custom when set","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getDefaultTTL returns default when env invalid and custom when set"},{"ancestorTitles":["ttlCache — basic operations and expiry"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ttlCache — basic operations and expiry set/get works and expires based on TTL","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"set/get works and expires based on TTL"},{"ancestorTitles":["ttlCache — basic operations and expiry"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ttlCache — basic operations and expiry invalidateKey and invalidateAll clear entries","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"invalidateKey and invalidateAll clear entries"}],"endTime":1761555219328,"message":"","name":"/Users/admin/character crm/tests/ttlCache.unit.test.js","startTime":1761555219314,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["statusDeletionGuard — positive path"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"statusDeletionGuard — positive path returns true when OrderType.exists finds a match","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns true when OrderType.exists finds a match"}],"endTime":1761555219343,"message":"","name":"/Users/admin/character crm/tests/statusDeletionGuard.positive.unit.test.js","startTime":1761555219332,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["devPayrollStore — basic operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"devPayrollStore — basic operations nextId increments; pushItem and getItems manage records","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"nextId increments; pushItem and getItems manage records"}],"endTime":1761555219356,"message":"","name":"/Users/admin/character crm/tests/devPayrollStore.unit.test.js","startTime":1761555219344,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["devPaymentsStore — basic operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"devPaymentsStore — basic operations nextId increments and pushItem adds records","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"nextId increments and pushItem adds records"}],"endTime":1761555219369,"message":"","name":"/Users/admin/character crm/tests/devPaymentsStore.unit.test.js","startTime":1761555219357,"status":"passed","summary":""}],"wasInterrupted":false,"coverageMap":{"/Users/admin/character crm/services/stock/stockService.js":{"path":"/Users/admin/character crm/services/stock/stockService.js","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":1,"column":36}},"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":79}},"2":{"start":{"line":4,"column":6},"end":{"line":4,"column":64}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":83}},"4":{"start":{"line":5,"column":6},"end":{"line":5,"column":68}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"6":{"start":{"line":6,"column":6},"end":{"line":6,"column":44}},"7":{"start":{"line":8,"column":19},"end":{"line":8,"column":84}},"8":{"start":{"line":8,"column":25},"end":{"line":8,"column":84}},"9":{"start":{"line":9,"column":18},"end":{"line":9,"column":119}},"10":{"start":{"line":9,"column":57},"end":{"line":9,"column":75}},"11":{"start":{"line":9,"column":77},"end":{"line":9,"column":105}},"12":{"start":{"line":9,"column":106},"end":{"line":9,"column":117}},"13":{"start":{"line":12,"column":2},"end":{"line":12,"column":89}},"14":{"start":{"line":12,"column":8},"end":{"line":12,"column":55}},"15":{"start":{"line":12,"column":70},"end":{"line":12,"column":87}},"16":{"start":{"line":16,"column":2},"end":{"line":16,"column":65}},"17":{"start":{"line":16,"column":21},"end":{"line":16,"column":65}},"18":{"start":{"line":17,"column":2},"end":{"line":17,"column":52}},"19":{"start":{"line":17,"column":21},"end":{"line":17,"column":52}},"20":{"start":{"line":18,"column":16},"end":{"line":18,"column":18}},"21":{"start":{"line":19,"column":2},"end":{"line":19,"column":45}},"22":{"start":{"line":19,"column":14},"end":{"line":19,"column":45}},"23":{"start":{"line":20,"column":2},"end":{"line":20,"column":57}},"24":{"start":{"line":20,"column":18},"end":{"line":20,"column":57}},"25":{"start":{"line":21,"column":16},"end":{"line":21,"column":102}},"26":{"start":{"line":22,"column":2},"end":{"line":22,"column":29}},"27":{"start":{"line":26,"column":2},"end":{"line":26,"column":84}},"28":{"start":{"line":26,"column":40},"end":{"line":26,"column":84}},"29":{"start":{"line":27,"column":2},"end":{"line":27,"column":58}},"30":{"start":{"line":27,"column":21},"end":{"line":27,"column":58}},"31":{"start":{"line":28,"column":18},"end":{"line":28,"column":47}},"32":{"start":{"line":29,"column":2},"end":{"line":29,"column":29}},"33":{"start":{"line":30,"column":2},"end":{"line":70,"column":3}},"34":{"start":{"line":31,"column":20},"end":{"line":31,"column":35}},"35":{"start":{"line":32,"column":19},"end":{"line":32,"column":38}},"36":{"start":{"line":33,"column":21},"end":{"line":33,"column":105}},"37":{"start":{"line":34,"column":20},"end":{"line":34,"column":65}},"38":{"start":{"line":35,"column":17},"end":{"line":35,"column":43}},"39":{"start":{"line":36,"column":4},"end":{"line":36,"column":69}},"40":{"start":{"line":36,"column":18},"end":{"line":36,"column":69}},"41":{"start":{"line":39,"column":4},"end":{"line":43,"column":6}},"42":{"start":{"line":46,"column":19},"end":{"line":46,"column":55}},"43":{"start":{"line":47,"column":15},"end":{"line":59,"column":19}},"44":{"start":{"line":61,"column":4},"end":{"line":61,"column":38}},"45":{"start":{"line":62,"column":4},"end":{"line":62,"column":25}},"46":{"start":{"line":64,"column":20},"end":{"line":64,"column":94}},"47":{"start":{"line":65,"column":4},"end":{"line":65,"column":78}},"48":{"start":{"line":67,"column":4},"end":{"line":67,"column":54}},"49":{"start":{"line":67,"column":10},"end":{"line":67,"column":43}},"50":{"start":{"line":68,"column":4},"end":{"line":68,"column":25}},"51":{"start":{"line":69,"column":4},"end":{"line":69,"column":14}},"52":{"start":{"line":74,"column":2},"end":{"line":74,"column":84}},"53":{"start":{"line":74,"column":40},"end":{"line":74,"column":84}},"54":{"start":{"line":75,"column":2},"end":{"line":75,"column":58}},"55":{"start":{"line":75,"column":21},"end":{"line":75,"column":58}},"56":{"start":{"line":76,"column":18},"end":{"line":76,"column":47}},"57":{"start":{"line":77,"column":2},"end":{"line":77,"column":29}},"58":{"start":{"line":78,"column":2},"end":{"line":122,"column":3}},"59":{"start":{"line":79,"column":20},"end":{"line":79,"column":35}},"60":{"start":{"line":80,"column":20},"end":{"line":80,"column":33}},"61":{"start":{"line":81,"column":18},"end":{"line":81,"column":29}},"62":{"start":{"line":83,"column":20},"end":{"line":83,"column":105}},"63":{"start":{"line":84,"column":20},"end":{"line":84,"column":63}},"64":{"start":{"line":85,"column":4},"end":{"line":85,"column":79}},"65":{"start":{"line":85,"column":36},"end":{"line":85,"column":79}},"66":{"start":{"line":87,"column":4},"end":{"line":91,"column":6}},"67":{"start":{"line":92,"column":4},"end":{"line":96,"column":6}},"68":{"start":{"line":98,"column":15},"end":{"line":110,"column":19}},"69":{"start":{"line":112,"column":4},"end":{"line":112,"column":38}},"70":{"start":{"line":113,"column":4},"end":{"line":113,"column":25}},"71":{"start":{"line":115,"column":24},"end":{"line":115,"column":99}},"72":{"start":{"line":116,"column":22},"end":{"line":116,"column":95}},"73":{"start":{"line":117,"column":4},"end":{"line":117,"column":96}},"74":{"start":{"line":119,"column":4},"end":{"line":119,"column":54}},"75":{"start":{"line":119,"column":10},"end":{"line":119,"column":43}},"76":{"start":{"line":120,"column":4},"end":{"line":120,"column":25}},"77":{"start":{"line":121,"column":4},"end":{"line":121,"column":14}},"78":{"start":{"line":126,"column":2},"end":{"line":126,"column":85}},"79":{"start":{"line":126,"column":50},"end":{"line":126,"column":85}},"80":{"start":{"line":127,"column":2},"end":{"line":127,"column":56}},"81":{"start":{"line":127,"column":21},"end":{"line":127,"column":56}},"82":{"start":{"line":129,"column":16},"end":{"line":129,"column":52}},"83":{"start":{"line":130,"column":2},"end":{"line":130,"column":79}},"84":{"start":{"line":130,"column":45},"end":{"line":130,"column":79}},"85":{"start":{"line":132,"column":14},"end":{"line":132,"column":149}},"86":{"start":{"line":133,"column":2},"end":{"line":133,"column":47}},"87":{"start":{"line":133,"column":12},"end":{"line":133,"column":47}},"88":{"start":{"line":135,"column":18},"end":{"line":135,"column":19}},"89":{"start":{"line":135,"column":33},"end":{"line":135,"column":35}},"90":{"start":{"line":136,"column":18},"end":{"line":136,"column":47}},"91":{"start":{"line":137,"column":2},"end":{"line":137,"column":29}},"92":{"start":{"line":139,"column":2},"end":{"line":176,"column":3}},"93":{"start":{"line":140,"column":4},"end":{"line":167,"column":5}},"94":{"start":{"line":141,"column":21},"end":{"line":141,"column":36}},"95":{"start":{"line":141,"column":50},"end":{"line":141,"column":75}},"96":{"start":{"line":142,"column":6},"end":{"line":142,"column":40}},"97":{"start":{"line":142,"column":31},"end":{"line":142,"column":40}},"98":{"start":{"line":143,"column":22},"end":{"line":143,"column":37}},"99":{"start":{"line":146,"column":18},"end":{"line":146,"column":151}},"100":{"start":{"line":147,"column":6},"end":{"line":147,"column":44}},"101":{"start":{"line":147,"column":17},"end":{"line":147,"column":32}},"102":{"start":{"line":147,"column":33},"end":{"line":147,"column":42}},"103":{"start":{"line":149,"column":18},"end":{"line":149,"column":99}},"104":{"start":{"line":150,"column":22},"end":{"line":150,"column":57}},"105":{"start":{"line":151,"column":23},"end":{"line":151,"column":66}},"106":{"start":{"line":152,"column":26},"end":{"line":152,"column":59}},"107":{"start":{"line":153,"column":6},"end":{"line":153,"column":68}},"108":{"start":{"line":153,"column":25},"end":{"line":153,"column":68}},"109":{"start":{"line":155,"column":6},"end":{"line":159,"column":8}},"110":{"start":{"line":160,"column":17},"end":{"line":164,"column":21}},"111":{"start":{"line":165,"column":6},"end":{"line":165,"column":28}},"112":{"start":{"line":166,"column":6},"end":{"line":166,"column":21}},"113":{"start":{"line":169,"column":4},"end":{"line":169,"column":38}},"114":{"start":{"line":170,"column":4},"end":{"line":170,"column":25}},"115":{"start":{"line":171,"column":4},"end":{"line":171,"column":91}},"116":{"start":{"line":171,"column":61},"end":{"line":171,"column":71}},"117":{"start":{"line":173,"column":4},"end":{"line":173,"column":54}},"118":{"start":{"line":173,"column":10},"end":{"line":173,"column":43}},"119":{"start":{"line":174,"column":4},"end":{"line":174,"column":25}},"120":{"start":{"line":175,"column":4},"end":{"line":175,"column":87}},"121":{"start":{"line":180,"column":2},"end":{"line":180,"column":85}},"122":{"start":{"line":180,"column":50},"end":{"line":180,"column":85}},"123":{"start":{"line":181,"column":2},"end":{"line":181,"column":56}},"124":{"start":{"line":181,"column":21},"end":{"line":181,"column":56}},"125":{"start":{"line":183,"column":14},"end":{"line":183,"column":50}},"126":{"start":{"line":184,"column":2},"end":{"line":184,"column":75}},"127":{"start":{"line":184,"column":41},"end":{"line":184,"column":75}},"128":{"start":{"line":186,"column":14},"end":{"line":186,"column":194}},"129":{"start":{"line":187,"column":2},"end":{"line":187,"column":47}},"130":{"start":{"line":187,"column":12},"end":{"line":187,"column":47}},"131":{"start":{"line":189,"column":18},"end":{"line":189,"column":19}},"132":{"start":{"line":189,"column":33},"end":{"line":189,"column":35}},"133":{"start":{"line":190,"column":18},"end":{"line":190,"column":47}},"134":{"start":{"line":191,"column":2},"end":{"line":191,"column":29}},"135":{"start":{"line":193,"column":2},"end":{"line":224,"column":3}},"136":{"start":{"line":194,"column":4},"end":{"line":215,"column":5}},"137":{"start":{"line":195,"column":21},"end":{"line":195,"column":36}},"138":{"start":{"line":195,"column":50},"end":{"line":195,"column":75}},"139":{"start":{"line":196,"column":6},"end":{"line":196,"column":40}},"140":{"start":{"line":196,"column":31},"end":{"line":196,"column":40}},"141":{"start":{"line":197,"column":22},"end":{"line":197,"column":37}},"142":{"start":{"line":200,"column":18},"end":{"line":200,"column":158}},"143":{"start":{"line":201,"column":6},"end":{"line":201,"column":44}},"144":{"start":{"line":201,"column":17},"end":{"line":201,"column":32}},"145":{"start":{"line":201,"column":33},"end":{"line":201,"column":42}},"146":{"start":{"line":203,"column":6},"end":{"line":207,"column":8}},"147":{"start":{"line":208,"column":17},"end":{"line":212,"column":21}},"148":{"start":{"line":213,"column":6},"end":{"line":213,"column":28}},"149":{"start":{"line":214,"column":6},"end":{"line":214,"column":21}},"150":{"start":{"line":217,"column":4},"end":{"line":217,"column":38}},"151":{"start":{"line":218,"column":4},"end":{"line":218,"column":25}},"152":{"start":{"line":219,"column":4},"end":{"line":219,"column":91}},"153":{"start":{"line":219,"column":61},"end":{"line":219,"column":71}},"154":{"start":{"line":221,"column":4},"end":{"line":221,"column":54}},"155":{"start":{"line":221,"column":10},"end":{"line":221,"column":43}},"156":{"start":{"line":222,"column":4},"end":{"line":222,"column":25}},"157":{"start":{"line":223,"column":4},"end":{"line":223,"column":87}},"158":{"start":{"line":227,"column":0},"end":{"line":227,"column":86}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":19},"end":{"line":8,"column":20}},"loc":{"start":{"line":8,"column":25},"end":{"line":8,"column":84}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":18},"end":{"line":9,"column":19}},"loc":{"start":{"line":9,"column":43},"end":{"line":9,"column":119}},"line":9},"2":{"name":"asObjId","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":16}},"loc":{"start":{"line":11,"column":21},"end":{"line":13,"column":1}},"line":11},"3":{"name":"listBalances","decl":{"start":{"line":15,"column":15},"end":{"line":15,"column":27}},"loc":{"start":{"line":15,"column":76},"end":{"line":23,"column":1}},"line":15},"4":{"name":"adjust","decl":{"start":{"line":25,"column":15},"end":{"line":25,"column":21}},"loc":{"start":{"line":25,"column":65},"end":{"line":71,"column":1}},"line":25},"5":{"name":"transfer","decl":{"start":{"line":73,"column":15},"end":{"line":73,"column":23}},"loc":{"start":{"line":73,"column":65},"end":{"line":123,"column":1}},"line":73},"6":{"name":"issueFromOrder","decl":{"start":{"line":125,"column":15},"end":{"line":125,"column":29}},"loc":{"start":{"line":125,"column":68},"end":{"line":177,"column":1}},"line":125},"7":{"name":"(anonymous_7)","decl":{"start":{"line":171,"column":54},"end":{"line":171,"column":55}},"loc":{"start":{"line":171,"column":61},"end":{"line":171,"column":71}},"line":171},"8":{"name":"returnFromRefund","decl":{"start":{"line":179,"column":15},"end":{"line":179,"column":31}},"loc":{"start":{"line":179,"column":81},"end":{"line":225,"column":1}},"line":179},"9":{"name":"(anonymous_9)","decl":{"start":{"line":219,"column":54},"end":{"line":219,"column":55}},"loc":{"start":{"line":219,"column":61},"end":{"line":219,"column":71}},"line":219}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":25},"end":{"line":8,"column":84}},"type":"binary-expr","locations":[{"start":{"line":8,"column":25},"end":{"line":8,"column":44}},{"start":{"line":8,"column":48},"end":{"line":8,"column":84}}],"line":8},"1":{"loc":{"start":{"line":15,"column":50},"end":{"line":15,"column":60}},"type":"default-arg","locations":[{"start":{"line":15,"column":58},"end":{"line":15,"column":60}}],"line":15},"2":{"loc":{"start":{"line":15,"column":62},"end":{"line":15,"column":72}},"type":"default-arg","locations":[{"start":{"line":15,"column":71},"end":{"line":15,"column":72}}],"line":15},"3":{"loc":{"start":{"line":16,"column":2},"end":{"line":16,"column":65}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":65}},{"start":{},"end":{}}],"line":16},"4":{"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":52}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":52}},{"start":{},"end":{}}],"line":17},"5":{"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":45}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":19,"column":45}},{"start":{},"end":{}}],"line":19},"6":{"loc":{"start":{"line":20,"column":2},"end":{"line":20,"column":57}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":57}},{"start":{},"end":{}}],"line":20},"7":{"loc":{"start":{"line":26,"column":2},"end":{"line":26,"column":84}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":84}},{"start":{},"end":{}}],"line":26},"8":{"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":38}},"type":"binary-expr","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":19}},{"start":{"line":26,"column":23},"end":{"line":26,"column":38}}],"line":26},"9":{"loc":{"start":{"line":27,"column":2},"end":{"line":27,"column":58}},"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":58}},{"start":{},"end":{}}],"line":27},"10":{"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":65}},"type":"cond-expr","locations":[{"start":{"line":34,"column":31},"end":{"line":34,"column":61}},{"start":{"line":34,"column":64},"end":{"line":34,"column":65}}],"line":34},"11":{"loc":{"start":{"line":34,"column":38},"end":{"line":34,"column":60}},"type":"binary-expr","locations":[{"start":{"line":34,"column":38},"end":{"line":34,"column":55}},{"start":{"line":34,"column":59},"end":{"line":34,"column":60}}],"line":34},"12":{"loc":{"start":{"line":35,"column":34},"end":{"line":35,"column":42}},"type":"binary-expr","locations":[{"start":{"line":35,"column":34},"end":{"line":35,"column":37}},{"start":{"line":35,"column":41},"end":{"line":35,"column":42}}],"line":35},"13":{"loc":{"start":{"line":36,"column":4},"end":{"line":36,"column":69}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":69}},{"start":{},"end":{}}],"line":36},"14":{"loc":{"start":{"line":41,"column":70},"end":{"line":41,"column":78}},"type":"binary-expr","locations":[{"start":{"line":41,"column":70},"end":{"line":41,"column":73}},{"start":{"line":41,"column":77},"end":{"line":41,"column":78}}],"line":41},"15":{"loc":{"start":{"line":46,"column":19},"end":{"line":46,"column":55}},"type":"cond-expr","locations":[{"start":{"line":46,"column":43},"end":{"line":46,"column":47}},{"start":{"line":46,"column":50},"end":{"line":46,"column":55}}],"line":46},"16":{"loc":{"start":{"line":46,"column":26},"end":{"line":46,"column":34}},"type":"binary-expr","locations":[{"start":{"line":46,"column":26},"end":{"line":46,"column":29}},{"start":{"line":46,"column":33},"end":{"line":46,"column":34}}],"line":46},"17":{"loc":{"start":{"line":51,"column":29},"end":{"line":51,"column":37}},"type":"binary-expr","locations":[{"start":{"line":51,"column":29},"end":{"line":51,"column":32}},{"start":{"line":51,"column":36},"end":{"line":51,"column":37}}],"line":51},"18":{"loc":{"start":{"line":52,"column":24},"end":{"line":52,"column":61}},"type":"cond-expr","locations":[{"start":{"line":52,"column":43},"end":{"line":52,"column":49}},{"start":{"line":52,"column":52},"end":{"line":52,"column":61}}],"line":52},"19":{"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":58}},"type":"cond-expr","locations":[{"start":{"line":53,"column":40},"end":{"line":53,"column":46}},{"start":{"line":53,"column":49},"end":{"line":53,"column":58}}],"line":53},"20":{"loc":{"start":{"line":65,"column":51},"end":{"line":65,"column":75}},"type":"binary-expr","locations":[{"start":{"line":65,"column":51},"end":{"line":65,"column":53}},{"start":{"line":65,"column":57},"end":{"line":65,"column":62}},{"start":{"line":65,"column":66},"end":{"line":65,"column":75}}],"line":65},"21":{"loc":{"start":{"line":74,"column":2},"end":{"line":74,"column":84}},"type":"if","locations":[{"start":{"line":74,"column":2},"end":{"line":74,"column":84}},{"start":{},"end":{}}],"line":74},"22":{"loc":{"start":{"line":74,"column":6},"end":{"line":74,"column":38}},"type":"binary-expr","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":19}},{"start":{"line":74,"column":23},"end":{"line":74,"column":38}}],"line":74},"23":{"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":58}},"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":58}},{"start":{},"end":{}}],"line":75},"24":{"loc":{"start":{"line":84,"column":20},"end":{"line":84,"column":63}},"type":"cond-expr","locations":[{"start":{"line":84,"column":30},"end":{"line":84,"column":59}},{"start":{"line":84,"column":62},"end":{"line":84,"column":63}}],"line":84},"25":{"loc":{"start":{"line":84,"column":37},"end":{"line":84,"column":58}},"type":"binary-expr","locations":[{"start":{"line":84,"column":37},"end":{"line":84,"column":53}},{"start":{"line":84,"column":57},"end":{"line":84,"column":58}}],"line":84},"26":{"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":79}},"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":79}},{"start":{},"end":{}}],"line":85},"27":{"loc":{"start":{"line":85,"column":25},"end":{"line":85,"column":33}},"type":"binary-expr","locations":[{"start":{"line":85,"column":25},"end":{"line":85,"column":28}},{"start":{"line":85,"column":32},"end":{"line":85,"column":33}}],"line":85},"28":{"loc":{"start":{"line":89,"column":80},"end":{"line":89,"column":88}},"type":"binary-expr","locations":[{"start":{"line":89,"column":80},"end":{"line":89,"column":83}},{"start":{"line":89,"column":87},"end":{"line":89,"column":88}}],"line":89},"29":{"loc":{"start":{"line":94,"column":79},"end":{"line":94,"column":87}},"type":"binary-expr","locations":[{"start":{"line":94,"column":79},"end":{"line":94,"column":82}},{"start":{"line":94,"column":86},"end":{"line":94,"column":87}}],"line":94},"30":{"loc":{"start":{"line":102,"column":29},"end":{"line":102,"column":37}},"type":"binary-expr","locations":[{"start":{"line":102,"column":29},"end":{"line":102,"column":32}},{"start":{"line":102,"column":36},"end":{"line":102,"column":37}}],"line":102},"31":{"loc":{"start":{"line":117,"column":69},"end":{"line":117,"column":93}},"type":"binary-expr","locations":[{"start":{"line":117,"column":69},"end":{"line":117,"column":71}},{"start":{"line":117,"column":75},"end":{"line":117,"column":80}},{"start":{"line":117,"column":84},"end":{"line":117,"column":93}}],"line":117},"32":{"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":85}},"type":"if","locations":[{"start":{"line":126,"column":2},"end":{"line":126,"column":85}},{"start":{},"end":{}}],"line":126},"33":{"loc":{"start":{"line":126,"column":6},"end":{"line":126,"column":48}},"type":"binary-expr","locations":[{"start":{"line":126,"column":6},"end":{"line":126,"column":19}},{"start":{"line":126,"column":23},"end":{"line":126,"column":38}},{"start":{"line":126,"column":42},"end":{"line":126,"column":48}}],"line":126},"34":{"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":56}},"type":"if","locations":[{"start":{"line":127,"column":2},"end":{"line":127,"column":56}},{"start":{},"end":{}}],"line":127},"35":{"loc":{"start":{"line":130,"column":2},"end":{"line":130,"column":79}},"type":"if","locations":[{"start":{"line":130,"column":2},"end":{"line":130,"column":79}},{"start":{},"end":{}}],"line":130},"36":{"loc":{"start":{"line":130,"column":6},"end":{"line":130,"column":43}},"type":"binary-expr","locations":[{"start":{"line":130,"column":6},"end":{"line":130,"column":12}},{"start":{"line":130,"column":16},"end":{"line":130,"column":43}}],"line":130},"37":{"loc":{"start":{"line":132,"column":14},"end":{"line":132,"column":149}},"type":"cond-expr","locations":[{"start":{"line":132,"column":27},"end":{"line":132,"column":46}},{"start":{"line":132,"column":50},"end":{"line":132,"column":148}}],"line":132},"38":{"loc":{"start":{"line":132,"column":50},"end":{"line":132,"column":148}},"type":"cond-expr","locations":[{"start":{"line":132,"column":90},"end":{"line":132,"column":136}},{"start":{"line":132,"column":139},"end":{"line":132,"column":148}}],"line":132},"39":{"loc":{"start":{"line":133,"column":2},"end":{"line":133,"column":47}},"type":"if","locations":[{"start":{"line":133,"column":2},"end":{"line":133,"column":47}},{"start":{},"end":{}}],"line":133},"40":{"loc":{"start":{"line":141,"column":21},"end":{"line":141,"column":36}},"type":"binary-expr","locations":[{"start":{"line":141,"column":21},"end":{"line":141,"column":23}},{"start":{"line":141,"column":27},"end":{"line":141,"column":36}}],"line":141},"41":{"loc":{"start":{"line":141,"column":50},"end":{"line":141,"column":75}},"type":"binary-expr","locations":[{"start":{"line":141,"column":50},"end":{"line":141,"column":52}},{"start":{"line":141,"column":56},"end":{"line":141,"column":75}}],"line":141},"42":{"loc":{"start":{"line":141,"column":63},"end":{"line":141,"column":74}},"type":"binary-expr","locations":[{"start":{"line":141,"column":63},"end":{"line":141,"column":69}},{"start":{"line":141,"column":73},"end":{"line":141,"column":74}}],"line":141},"43":{"loc":{"start":{"line":142,"column":6},"end":{"line":142,"column":40}},"type":"if","locations":[{"start":{"line":142,"column":6},"end":{"line":142,"column":40}},{"start":{},"end":{}}],"line":142},"44":{"loc":{"start":{"line":142,"column":10},"end":{"line":142,"column":29}},"type":"binary-expr","locations":[{"start":{"line":142,"column":10},"end":{"line":142,"column":17}},{"start":{"line":142,"column":21},"end":{"line":142,"column":29}}],"line":142},"45":{"loc":{"start":{"line":147,"column":6},"end":{"line":147,"column":44}},"type":"if","locations":[{"start":{"line":147,"column":6},"end":{"line":147,"column":44}},{"start":{},"end":{}}],"line":147},"46":{"loc":{"start":{"line":150,"column":22},"end":{"line":150,"column":57}},"type":"cond-expr","locations":[{"start":{"line":150,"column":28},"end":{"line":150,"column":53}},{"start":{"line":150,"column":56},"end":{"line":150,"column":57}}],"line":150},"47":{"loc":{"start":{"line":150,"column":35},"end":{"line":150,"column":52}},"type":"binary-expr","locations":[{"start":{"line":150,"column":35},"end":{"line":150,"column":47}},{"start":{"line":150,"column":51},"end":{"line":150,"column":52}}],"line":150},"48":{"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":66}},"type":"cond-expr","locations":[{"start":{"line":151,"column":29},"end":{"line":151,"column":62}},{"start":{"line":151,"column":65},"end":{"line":151,"column":66}}],"line":151},"49":{"loc":{"start":{"line":151,"column":36},"end":{"line":151,"column":61}},"type":"binary-expr","locations":[{"start":{"line":151,"column":36},"end":{"line":151,"column":56}},{"start":{"line":151,"column":60},"end":{"line":151,"column":61}}],"line":151},"50":{"loc":{"start":{"line":153,"column":6},"end":{"line":153,"column":68}},"type":"if","locations":[{"start":{"line":153,"column":6},"end":{"line":153,"column":68}},{"start":{},"end":{}}],"line":153},"51":{"loc":{"start":{"line":165,"column":15},"end":{"line":165,"column":26}},"type":"binary-expr","locations":[{"start":{"line":165,"column":15},"end":{"line":165,"column":17}},{"start":{"line":165,"column":21},"end":{"line":165,"column":26}}],"line":165},"52":{"loc":{"start":{"line":171,"column":61},"end":{"line":171,"column":71}},"type":"binary-expr","locations":[{"start":{"line":171,"column":61},"end":{"line":171,"column":62}},{"start":{"line":171,"column":66},"end":{"line":171,"column":71}}],"line":171},"53":{"loc":{"start":{"line":175,"column":31},"end":{"line":175,"column":49}},"type":"binary-expr","locations":[{"start":{"line":175,"column":31},"end":{"line":175,"column":34}},{"start":{"line":175,"column":38},"end":{"line":175,"column":49}}],"line":175},"54":{"loc":{"start":{"line":175,"column":63},"end":{"line":175,"column":84}},"type":"binary-expr","locations":[{"start":{"line":175,"column":63},"end":{"line":175,"column":66}},{"start":{"line":175,"column":70},"end":{"line":175,"column":84}}],"line":175},"55":{"loc":{"start":{"line":180,"column":2},"end":{"line":180,"column":85}},"type":"if","locations":[{"start":{"line":180,"column":2},"end":{"line":180,"column":85}},{"start":{},"end":{}}],"line":180},"56":{"loc":{"start":{"line":180,"column":6},"end":{"line":180,"column":48}},"type":"binary-expr","locations":[{"start":{"line":180,"column":6},"end":{"line":180,"column":19}},{"start":{"line":180,"column":23},"end":{"line":180,"column":38}},{"start":{"line":180,"column":42},"end":{"line":180,"column":48}}],"line":180},"57":{"loc":{"start":{"line":181,"column":2},"end":{"line":181,"column":56}},"type":"if","locations":[{"start":{"line":181,"column":2},"end":{"line":181,"column":56}},{"start":{},"end":{}}],"line":181},"58":{"loc":{"start":{"line":184,"column":2},"end":{"line":184,"column":75}},"type":"if","locations":[{"start":{"line":184,"column":2},"end":{"line":184,"column":75}},{"start":{},"end":{}}],"line":184},"59":{"loc":{"start":{"line":184,"column":6},"end":{"line":184,"column":39}},"type":"binary-expr","locations":[{"start":{"line":184,"column":6},"end":{"line":184,"column":10}},{"start":{"line":184,"column":14},"end":{"line":184,"column":39}}],"line":184},"60":{"loc":{"start":{"line":186,"column":14},"end":{"line":186,"column":194}},"type":"cond-expr","locations":[{"start":{"line":186,"column":27},"end":{"line":186,"column":46}},{"start":{"line":186,"column":50},"end":{"line":186,"column":193}}],"line":186},"61":{"loc":{"start":{"line":186,"column":50},"end":{"line":186,"column":193}},"type":"cond-expr","locations":[{"start":{"line":186,"column":67},"end":{"line":186,"column":90}},{"start":{"line":186,"column":94},"end":{"line":186,"column":192}}],"line":186},"62":{"loc":{"start":{"line":186,"column":94},"end":{"line":186,"column":192}},"type":"cond-expr","locations":[{"start":{"line":186,"column":134},"end":{"line":186,"column":180}},{"start":{"line":186,"column":183},"end":{"line":186,"column":192}}],"line":186},"63":{"loc":{"start":{"line":187,"column":2},"end":{"line":187,"column":47}},"type":"if","locations":[{"start":{"line":187,"column":2},"end":{"line":187,"column":47}},{"start":{},"end":{}}],"line":187},"64":{"loc":{"start":{"line":195,"column":21},"end":{"line":195,"column":36}},"type":"binary-expr","locations":[{"start":{"line":195,"column":21},"end":{"line":195,"column":23}},{"start":{"line":195,"column":27},"end":{"line":195,"column":36}}],"line":195},"65":{"loc":{"start":{"line":195,"column":50},"end":{"line":195,"column":75}},"type":"binary-expr","locations":[{"start":{"line":195,"column":50},"end":{"line":195,"column":52}},{"start":{"line":195,"column":56},"end":{"line":195,"column":75}}],"line":195},"66":{"loc":{"start":{"line":195,"column":63},"end":{"line":195,"column":74}},"type":"binary-expr","locations":[{"start":{"line":195,"column":63},"end":{"line":195,"column":69}},{"start":{"line":195,"column":73},"end":{"line":195,"column":74}}],"line":195},"67":{"loc":{"start":{"line":196,"column":6},"end":{"line":196,"column":40}},"type":"if","locations":[{"start":{"line":196,"column":6},"end":{"line":196,"column":40}},{"start":{},"end":{}}],"line":196},"68":{"loc":{"start":{"line":196,"column":10},"end":{"line":196,"column":29}},"type":"binary-expr","locations":[{"start":{"line":196,"column":10},"end":{"line":196,"column":17}},{"start":{"line":196,"column":21},"end":{"line":196,"column":29}}],"line":196},"69":{"loc":{"start":{"line":201,"column":6},"end":{"line":201,"column":44}},"type":"if","locations":[{"start":{"line":201,"column":6},"end":{"line":201,"column":44}},{"start":{},"end":{}}],"line":201},"70":{"loc":{"start":{"line":213,"column":15},"end":{"line":213,"column":26}},"type":"binary-expr","locations":[{"start":{"line":213,"column":15},"end":{"line":213,"column":17}},{"start":{"line":213,"column":21},"end":{"line":213,"column":26}}],"line":213},"71":{"loc":{"start":{"line":219,"column":61},"end":{"line":219,"column":71}},"type":"binary-expr","locations":[{"start":{"line":219,"column":61},"end":{"line":219,"column":62}},{"start":{"line":219,"column":66},"end":{"line":219,"column":71}}],"line":219},"72":{"loc":{"start":{"line":223,"column":31},"end":{"line":223,"column":49}},"type":"binary-expr","locations":[{"start":{"line":223,"column":31},"end":{"line":223,"column":34}},{"start":{"line":223,"column":38},"end":{"line":223,"column":49}}],"line":223},"73":{"loc":{"start":{"line":223,"column":63},"end":{"line":223,"column":84}},"type":"binary-expr","locations":[{"start":{"line":223,"column":63},"end":{"line":223,"column":66}},{"start":{"line":223,"column":70},"end":{"line":223,"column":84}}],"line":223}},"s":{"0":46,"1":46,"2":46,"3":46,"4":46,"5":46,"6":46,"7":46,"8":31,"9":46,"10":6,"11":6,"12":6,"13":100,"14":100,"15":26,"16":4,"17":0,"18":4,"19":0,"20":4,"21":4,"22":2,"23":4,"24":0,"25":4,"26":4,"27":8,"28":0,"29":8,"30":0,"31":8,"32":8,"33":8,"34":8,"35":8,"36":8,"37":8,"38":8,"39":8,"40":3,"41":5,"42":5,"43":5,"44":5,"45":5,"46":5,"47":5,"48":3,"49":3,"50":3,"51":3,"52":6,"53":0,"54":6,"55":0,"56":6,"57":6,"58":6,"59":6,"60":6,"61":6,"62":6,"63":6,"64":6,"65":2,"66":4,"67":4,"68":4,"69":4,"70":4,"71":4,"72":4,"73":4,"74":2,"75":2,"76":2,"77":2,"78":8,"79":0,"80":8,"81":0,"82":8,"83":8,"84":0,"85":8,"86":8,"87":0,"88":8,"89":8,"90":8,"91":8,"92":8,"93":8,"94":8,"95":8,"96":8,"97":0,"98":8,"99":8,"100":8,"101":2,"102":2,"103":6,"104":6,"105":6,"106":6,"107":6,"108":1,"109":5,"110":5,"111":5,"112":5,"113":7,"114":7,"115":7,"116":5,"117":1,"118":1,"119":1,"120":1,"121":5,"122":0,"123":5,"124":0,"125":5,"126":5,"127":0,"128":5,"129":5,"130":0,"131":5,"132":5,"133":5,"134":5,"135":5,"136":5,"137":5,"138":5,"139":5,"140":0,"141":5,"142":5,"143":5,"144":2,"145":2,"146":3,"147":3,"148":3,"149":3,"150":5,"151":5,"152":5,"153":3,"154":0,"155":0,"156":0,"157":0,"158":46},"f":{"0":31,"1":6,"2":100,"3":4,"4":8,"5":6,"6":8,"7":5,"8":5,"9":3},"b":{"0":[31,31],"1":[0],"2":[0],"3":[0,4],"4":[0,4],"5":[2,2],"6":[0,4],"7":[0,8],"8":[8,8],"9":[0,8],"10":[4,4],"11":[4,0],"12":[8,0],"13":[3,5],"14":[5,0],"15":[4,1],"16":[5,0],"17":[5,0],"18":[1,4],"19":[4,1],"20":[5,5,5],"21":[0,6],"22":[6,6],"23":[0,6],"24":[6,0],"25":[6,0],"26":[2,4],"27":[6,0],"28":[4,0],"29":[4,0],"30":[4,0],"31":[4,4,4],"32":[0,8],"33":[8,8,8],"34":[0,8],"35":[0,8],"36":[8,8],"37":[3,5],"38":[5,0],"39":[0,8],"40":[8,8],"41":[8,8],"42":[8,0],"43":[0,8],"44":[8,8],"45":[2,6],"46":[6,0],"47":[6,0],"48":[6,0],"49":[6,3],"50":[1,5],"51":[5,5],"52":[5,5],"53":[1,1],"54":[1,1],"55":[0,5],"56":[5,5,5],"57":[0,5],"58":[0,5],"59":[5,5],"60":[5,0],"61":[0,0],"62":[0,0],"63":[0,5],"64":[5,5],"65":[5,5],"66":[5,0],"67":[0,5],"68":[5,5],"69":[2,3],"70":[3,3],"71":[3,3],"72":[0,0],"73":[0,0]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0e0053c3fe2bede661765178a29ecf5e7facd9de"},"/Users/admin/character crm/services/reports/stocksReportService.js":{"path":"/Users/admin/character crm/services/reports/stocksReportService.js","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":1,"column":36}},"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":79}},"2":{"start":{"line":4,"column":6},"end":{"line":4,"column":64}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":83}},"4":{"start":{"line":5,"column":6},"end":{"line":5,"column":68}},"5":{"start":{"line":7,"column":19},"end":{"line":7,"column":84}},"6":{"start":{"line":7,"column":25},"end":{"line":7,"column":84}},"7":{"start":{"line":8,"column":18},"end":{"line":8,"column":119}},"8":{"start":{"line":8,"column":57},"end":{"line":8,"column":75}},"9":{"start":{"line":8,"column":77},"end":{"line":8,"column":105}},"10":{"start":{"line":8,"column":106},"end":{"line":8,"column":117}},"11":{"start":{"line":11,"column":12},"end":{"line":11,"column":46}},"12":{"start":{"line":12,"column":2},"end":{"line":12,"column":35}},"13":{"start":{"line":17,"column":2},"end":{"line":17,"column":65}},"14":{"start":{"line":17,"column":21},"end":{"line":17,"column":65}},"15":{"start":{"line":18,"column":2},"end":{"line":18,"column":66}},"16":{"start":{"line":18,"column":21},"end":{"line":18,"column":66}},"17":{"start":{"line":20,"column":14},"end":{"line":24,"column":4}},"18":{"start":{"line":26,"column":17},"end":{"line":29,"column":5}},"19":{"start":{"line":26,"column":35},"end":{"line":29,"column":3}},"20":{"start":{"line":30,"column":19},"end":{"line":30,"column":67}},"21":{"start":{"line":30,"column":45},"end":{"line":30,"column":63}},"22":{"start":{"line":31,"column":2},"end":{"line":31,"column":40}},"23":{"start":{"line":36,"column":2},"end":{"line":36,"column":67}},"24":{"start":{"line":36,"column":23},"end":{"line":36,"column":67}},"25":{"start":{"line":37,"column":2},"end":{"line":37,"column":88}},"26":{"start":{"line":37,"column":21},"end":{"line":37,"column":88}},"27":{"start":{"line":39,"column":16},"end":{"line":39,"column":18}},"28":{"start":{"line":40,"column":13},"end":{"line":40,"column":28}},"29":{"start":{"line":41,"column":13},"end":{"line":41,"column":26}},"30":{"start":{"line":42,"column":2},"end":{"line":46,"column":3}},"31":{"start":{"line":43,"column":4},"end":{"line":43,"column":25}},"32":{"start":{"line":44,"column":4},"end":{"line":44,"column":38}},"33":{"start":{"line":44,"column":12},"end":{"line":44,"column":38}},"34":{"start":{"line":45,"column":4},"end":{"line":45,"column":38}},"35":{"start":{"line":45,"column":12},"end":{"line":45,"column":38}},"36":{"start":{"line":48,"column":20},"end":{"line":51,"column":4}},"37":{"start":{"line":52,"column":16},"end":{"line":52,"column":17}},"38":{"start":{"line":52,"column":34},"end":{"line":52,"column":35}},"39":{"start":{"line":53,"column":2},"end":{"line":58,"column":5}},"40":{"start":{"line":54,"column":14},"end":{"line":54,"column":35}},"41":{"start":{"line":55,"column":14},"end":{"line":55,"column":34}},"42":{"start":{"line":56,"column":4},"end":{"line":57,"column":40}},"43":{"start":{"line":56,"column":38},"end":{"line":56,"column":51}},"44":{"start":{"line":57,"column":9},"end":{"line":57,"column":40}},"45":{"start":{"line":57,"column":26},"end":{"line":57,"column":40}},"46":{"start":{"line":60,"column":20},"end":{"line":63,"column":4}},"47":{"start":{"line":64,"column":14},"end":{"line":64,"column":23}},"48":{"start":{"line":65,"column":2},"end":{"line":72,"column":5}},"49":{"start":{"line":66,"column":15},"end":{"line":66,"column":43}},"50":{"start":{"line":67,"column":14},"end":{"line":67,"column":40}},"51":{"start":{"line":68,"column":14},"end":{"line":68,"column":34}},"52":{"start":{"line":69,"column":16},"end":{"line":69,"column":60}},"53":{"start":{"line":70,"column":4},"end":{"line":70,"column":86}},"54":{"start":{"line":70,"column":38},"end":{"line":70,"column":50}},"55":{"start":{"line":70,"column":56},"end":{"line":70,"column":86}},"56":{"start":{"line":70,"column":73},"end":{"line":70,"column":86}},"57":{"start":{"line":71,"column":4},"end":{"line":71,"column":21}},"58":{"start":{"line":73,"column":17},"end":{"line":76,"column":62}},"59":{"start":{"line":74,"column":17},"end":{"line":74,"column":78}},"60":{"start":{"line":75,"column":20},"end":{"line":75,"column":51}},"61":{"start":{"line":78,"column":2},"end":{"line":78,"column":95}},"62":{"start":{"line":81,"column":0},"end":{"line":81,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":19},"end":{"line":7,"column":20}},"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":84}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":18},"end":{"line":8,"column":19}},"loc":{"start":{"line":8,"column":43},"end":{"line":8,"column":119}},"line":8},"2":{"name":"parseDate","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":18}},"loc":{"start":{"line":10,"column":24},"end":{"line":13,"column":1}},"line":10},"3":{"name":"summaryByLocation","decl":{"start":{"line":16,"column":15},"end":{"line":16,"column":32}},"loc":{"start":{"line":16,"column":54},"end":{"line":32,"column":1}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":25},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":35},"end":{"line":29,"column":3}},"line":26},"5":{"name":"(anonymous_5)","decl":{"start":{"line":30,"column":33},"end":{"line":30,"column":34}},"loc":{"start":{"line":30,"column":45},"end":{"line":30,"column":63}},"line":30},"6":{"name":"turnover","decl":{"start":{"line":35,"column":15},"end":{"line":35,"column":23}},"loc":{"start":{"line":35,"column":55},"end":{"line":79,"column":1}},"line":35},"7":{"name":"(anonymous_7)","decl":{"start":{"line":53,"column":20},"end":{"line":53,"column":21}},"loc":{"start":{"line":53,"column":29},"end":{"line":58,"column":3}},"line":53},"8":{"name":"(anonymous_8)","decl":{"start":{"line":65,"column":20},"end":{"line":65,"column":21}},"loc":{"start":{"line":65,"column":29},"end":{"line":72,"column":3}},"line":65},"9":{"name":"(anonymous_9)","decl":{"start":{"line":74,"column":9},"end":{"line":74,"column":10}},"loc":{"start":{"line":74,"column":17},"end":{"line":74,"column":78}},"line":74},"10":{"name":"(anonymous_10)","decl":{"start":{"line":75,"column":10},"end":{"line":75,"column":11}},"loc":{"start":{"line":75,"column":20},"end":{"line":75,"column":51}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":84}},"type":"binary-expr","locations":[{"start":{"line":7,"column":25},"end":{"line":7,"column":44}},{"start":{"line":7,"column":48},"end":{"line":7,"column":84}}],"line":7},"1":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":46}},"type":"cond-expr","locations":[{"start":{"line":11,"column":18},"end":{"line":11,"column":39}},{"start":{"line":11,"column":42},"end":{"line":11,"column":46}}],"line":11},"2":{"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":34}},"type":"cond-expr","locations":[{"start":{"line":12,"column":26},"end":{"line":12,"column":27}},{"start":{"line":12,"column":30},"end":{"line":12,"column":34}}],"line":12},"3":{"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":23}},"type":"binary-expr","locations":[{"start":{"line":12,"column":9},"end":{"line":12,"column":10}},{"start":{"line":12,"column":14},"end":{"line":12,"column":23}}],"line":12},"4":{"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":52}},"type":"default-arg","locations":[{"start":{"line":16,"column":50},"end":{"line":16,"column":52}}],"line":16},"5":{"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":45}},"type":"default-arg","locations":[{"start":{"line":16,"column":43},"end":{"line":16,"column":45}}],"line":16},"6":{"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":65}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":65}},{"start":{},"end":{}}],"line":17},"7":{"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":66}},"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":66}},{"start":{},"end":{}}],"line":18},"8":{"loc":{"start":{"line":23,"column":40},"end":{"line":23,"column":59}},"type":"binary-expr","locations":[{"start":{"line":23,"column":40},"end":{"line":23,"column":53}},{"start":{"line":23,"column":57},"end":{"line":23,"column":59}}],"line":23},"9":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":53}},"type":"cond-expr","locations":[{"start":{"line":27,"column":26},"end":{"line":27,"column":41}},{"start":{"line":27,"column":44},"end":{"line":27,"column":53}}],"line":27},"10":{"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":41}},"type":"binary-expr","locations":[{"start":{"line":28,"column":26},"end":{"line":28,"column":36}},{"start":{"line":28,"column":40},"end":{"line":28,"column":41}}],"line":28},"11":{"loc":{"start":{"line":28,"column":61},"end":{"line":28,"column":81}},"type":"binary-expr","locations":[{"start":{"line":28,"column":61},"end":{"line":28,"column":76}},{"start":{"line":28,"column":80},"end":{"line":28,"column":81}}],"line":28},"12":{"loc":{"start":{"line":28,"column":102},"end":{"line":28,"column":117}},"type":"binary-expr","locations":[{"start":{"line":28,"column":102},"end":{"line":28,"column":112}},{"start":{"line":28,"column":116},"end":{"line":28,"column":117}}],"line":28},"13":{"loc":{"start":{"line":28,"column":128},"end":{"line":28,"column":148}},"type":"binary-expr","locations":[{"start":{"line":28,"column":128},"end":{"line":28,"column":143}},{"start":{"line":28,"column":147},"end":{"line":28,"column":148}}],"line":28},"14":{"loc":{"start":{"line":35,"column":24},"end":{"line":35,"column":53}},"type":"default-arg","locations":[{"start":{"line":35,"column":51},"end":{"line":35,"column":53}}],"line":35},"15":{"loc":{"start":{"line":35,"column":36},"end":{"line":35,"column":46}},"type":"default-arg","locations":[{"start":{"line":35,"column":44},"end":{"line":35,"column":46}}],"line":35},"16":{"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":67}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":36,"column":67}},{"start":{},"end":{}}],"line":36},"17":{"loc":{"start":{"line":37,"column":2},"end":{"line":37,"column":88}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":37,"column":88}},{"start":{},"end":{}}],"line":37},"18":{"loc":{"start":{"line":42,"column":2},"end":{"line":46,"column":3}},"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":46,"column":3}},{"start":{},"end":{}}],"line":42},"19":{"loc":{"start":{"line":42,"column":6},"end":{"line":42,"column":14}},"type":"binary-expr","locations":[{"start":{"line":42,"column":6},"end":{"line":42,"column":8}},{"start":{"line":42,"column":12},"end":{"line":42,"column":14}}],"line":42},"20":{"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":38}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":38}},{"start":{},"end":{}}],"line":44},"21":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":38}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":38}},{"start":{},"end":{}}],"line":45},"22":{"loc":{"start":{"line":54,"column":21},"end":{"line":54,"column":34}},"type":"binary-expr","locations":[{"start":{"line":54,"column":21},"end":{"line":54,"column":28}},{"start":{"line":54,"column":32},"end":{"line":54,"column":34}}],"line":54},"23":{"loc":{"start":{"line":55,"column":21},"end":{"line":55,"column":33}},"type":"binary-expr","locations":[{"start":{"line":55,"column":21},"end":{"line":55,"column":28}},{"start":{"line":55,"column":32},"end":{"line":55,"column":33}}],"line":55},"24":{"loc":{"start":{"line":56,"column":4},"end":{"line":57,"column":40}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":57,"column":40}},{"start":{"line":57,"column":9},"end":{"line":57,"column":40}}],"line":56},"25":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":36}},"type":"binary-expr","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":18}},{"start":{"line":56,"column":22},"end":{"line":56,"column":36}}],"line":56},"26":{"loc":{"start":{"line":57,"column":9},"end":{"line":57,"column":40}},"type":"if","locations":[{"start":{"line":57,"column":9},"end":{"line":57,"column":40}},{"start":{},"end":{}}],"line":57},"27":{"loc":{"start":{"line":66,"column":22},"end":{"line":66,"column":42}},"type":"binary-expr","locations":[{"start":{"line":66,"column":22},"end":{"line":66,"column":36}},{"start":{"line":66,"column":40},"end":{"line":66,"column":42}}],"line":66},"28":{"loc":{"start":{"line":67,"column":21},"end":{"line":67,"column":39}},"type":"binary-expr","locations":[{"start":{"line":67,"column":21},"end":{"line":67,"column":33}},{"start":{"line":67,"column":37},"end":{"line":67,"column":39}}],"line":67},"29":{"loc":{"start":{"line":68,"column":21},"end":{"line":68,"column":33}},"type":"binary-expr","locations":[{"start":{"line":68,"column":21},"end":{"line":68,"column":28}},{"start":{"line":68,"column":32},"end":{"line":68,"column":33}}],"line":68},"30":{"loc":{"start":{"line":69,"column":16},"end":{"line":69,"column":60}},"type":"binary-expr","locations":[{"start":{"line":69,"column":16},"end":{"line":69,"column":27}},{"start":{"line":69,"column":31},"end":{"line":69,"column":60}}],"line":69},"31":{"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":86}},"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":86}},{"start":{"line":70,"column":56},"end":{"line":70,"column":86}}],"line":70},"32":{"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":36}},"type":"binary-expr","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":18}},{"start":{"line":70,"column":22},"end":{"line":70,"column":36}}],"line":70},"33":{"loc":{"start":{"line":70,"column":56},"end":{"line":70,"column":86}},"type":"if","locations":[{"start":{"line":70,"column":56},"end":{"line":70,"column":86}},{"start":{},"end":{}}],"line":70},"34":{"loc":{"start":{"line":76,"column":40},"end":{"line":76,"column":59}},"type":"binary-expr","locations":[{"start":{"line":76,"column":40},"end":{"line":76,"column":53}},{"start":{"line":76,"column":57},"end":{"line":76,"column":59}}],"line":76}},"s":{"0":2,"1":2,"2":2,"3":2,"4":2,"5":2,"6":10,"7":2,"8":0,"9":0,"10":0,"11":10,"12":10,"13":4,"14":0,"15":4,"16":1,"17":3,"18":3,"19":6,"20":3,"21":6,"22":3,"23":6,"24":0,"25":6,"26":1,"27":5,"28":5,"29":5,"30":5,"31":2,"32":2,"33":2,"34":2,"35":2,"36":5,"37":5,"38":5,"39":5,"40":12,"41":12,"42":12,"43":7,"44":5,"45":5,"46":5,"47":5,"48":5,"49":16,"50":16,"51":16,"52":16,"53":16,"54":9,"55":7,"56":7,"57":16,"58":5,"59":7,"60":2,"61":5,"62":2},"f":{"0":10,"1":0,"2":10,"3":4,"4":6,"5":6,"6":6,"7":12,"8":16,"9":7,"10":2},"b":{"0":[10,10],"1":[6,4],"2":[4,6],"3":[10,6],"4":[0],"5":[0],"6":[0,4],"7":[1,3],"8":[3,0],"9":[6,0],"10":[6,0],"11":[6,0],"12":[6,0],"13":[6,0],"14":[0],"15":[2],"16":[0,6],"17":[1,5],"18":[2,3],"19":[5,3],"20":[2,0],"21":[2,0],"22":[12,0],"23":[12,0],"24":[7,5],"25":[12,7],"26":[5,0],"27":[16,0],"28":[16,0],"29":[16,0],"30":[16,7],"31":[9,7],"32":[16,9],"33":[7,0],"34":[5,0]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"417e14c34efd55a21af3c4f497a427db505be3c6"}}}
